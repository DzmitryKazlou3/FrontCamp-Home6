{"version":3,"sources":["webpack:///webpack/bootstrap a44cd3ef05e98db80da2","webpack:///external \"babel-runtime/helpers/classCallCheck\"","webpack:///./bloglog.common/result.js","webpack:///./bloglog.common/resultCodes.js","webpack:///external \"babel-runtime/helpers/createClass\"","webpack:///external \"babel-runtime/core-js/promise\"","webpack:///external \"express\"","webpack:///external \"mongoose\"","webpack:///./bloglog.repositories/index.js","webpack:///./bloglog.services/index.js","webpack:///./bloglog.models/articleModel.js","webpack:///./bloglog.models/commentModel.js","webpack:///./bloglog.models/tagModel.js","webpack:///./bloglog.models/userModel.js","webpack:///external \"babel-runtime/core-js/get-iterator\"","webpack:///./bloglog.common/pageResult.js","webpack:///external \"passport\"","webpack:///external \"ts-md5/dist/md5\"","webpack:///../config.json","webpack:///./bloglog.api/index.js","webpack:///./bloglog.auth/index.js","webpack:///./bloglog.ui/index.js","webpack:///external \"body-parser\"","webpack:///external \"ejs\"","webpack:///external \"http\"","webpack:///external \"path\"","webpack:///./bloglog.api/articleRoutes.js","webpack:///./bloglog.api/tagsRoutes.js","webpack:///./bloglog.repositories/mongooseModels/articleDataModel.js","webpack:///./bloglog.repositories/mongooseModels/commentDataModel.js","webpack:///./bloglog.repositories/mongooseModels/tagDataModel.js","webpack:///./bloglog.repositories/mongooseModels/userDataModel.js","webpack:///./bloglog.repositories/mongooseRepositories/articleRepository.js","webpack:///./bloglog.repositories/mongooseRepositories/commentRepository.js","webpack:///./bloglog.repositories/mongooseRepositories/tagRepository.js","webpack:///./bloglog.repositories/mongooseRepositories/userRepository.js","webpack:///./bloglog.services/articleService.js","webpack:///./bloglog.services/commentService.js","webpack:///./bloglog.services/tagService.js","webpack:///./bloglog.services/userService.js","webpack:///./bloglog.ui/views/index.html","webpack:///external \"jwt-simple\"","webpack:///external \"passport-jwt\"","webpack:///./index.js"],"names":["Result","data","success","message","code","ResultCodes","connect","Promise","global","connection","articleRepository","tagRepository","userRepository","commentRepository","articleService","tagService","userService","commentService","ArticleModel","id","title","text","description","tags","createDateTime","updateDateTime","user","CommentModel","article_id","TagModel","value","article_ids","UserModel","name","email","password","PageResult","count","router","use","initialize","app","opts","secretOrKey","jwtFromRequest","fromAuthHeader","jwt_payload","done","get","then","result","catch","error","post","req","res","body","json","ObjectExists","refuceResult","ObjectNotFound","add","Success","InvalidObject","Error","checkPassword","token","encode","Unathorized","render","next","getRecent","errorResult","authenticate","session","Date","now","pageNumber","Number","params","pageSize","filterData","InvalidArguments","put","update","delete","getCommentsByArticleId","sendStatus","getTagsByText","query","articleSchema","Schema","type","String","required","Array","default","Types","ObjectId","model","commentSchema","tagSchema","unique","userSchema","ArticleRepository","skip","resolve","reject","find","sort","limit","exec","err","articles","articleModels","article","push","MapToArticleModel","queryFilter","$all","findOne","articleModel","create","articleCreatedDataModel","findByIdAndUpdate","new","updatedArticleDataModel","findByIdAndRemove","deletedArticleDataModel","articleDataModel","_id","CommentRepository","comments","commentModels","comment","MapToCommentModel","commentModel","commentCreatedDataModel","commentDataModel","TagRepository","values","$in","tagModels","tag","MapToTagModel","tagIds","articleId","tagValues","updates","tagValue","q","u","$set","$addToSet","upsert","db","command","ordered","writeConcern","w","wtimeout","commandResult","upserted","writeErrors","errmsg","writeConcernError","tagDataModel","articles_ids","UserRepository","MapToUserModel","ArticleService","getByTagValue","checkArticle","createOrUpdateByArticleId","addArticleResult","addArticleErrorResult","getById","articleFromStorage","user_id","equals","length","CommentService","getByArticleId","checkComment","TagService","getContainsText","isArray","getArticleIdsByTagIds","tagModel","checkTag","UserService","userModel","checkUser","hashStr","server","createServer","static","set","engine","require","renderFile","join","__dirname","listen","process","env","PORT","port"],"mappings":"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","file":"index.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 63);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a44cd3ef05e98db80da2","module.exports = require(\"babel-runtime/helpers/classCallCheck\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/classCallCheck\"\n// module id = 0\n// module chunks = 0","'use strict';\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\n// import articleRoutes from './articleRoutes.js';\r\n\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class Result{\r\n    constructor(data, success, message, code){\r\n      this.data = data;\r\n      this.success = success;\r\n      this.message = message;\r\n      this.code = code;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.common/result.js","'use strict';\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\n// import articleRoutes from './articleRoutes.js';\r\n\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class ResultCodes{\r\n    static Error() { return -1;}\r\n    static Success() { return 0;}\r\n\r\n    \r\n    static InvalidObject() { return 1;}\r\n    static ObjectNotFound() { return 2;}\r\n    static ObjectExists() { return 3;}\r\n    static Unathorized() { return 4;}\r\n    static InvalidArguments() { return 5;}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.common/resultCodes.js","module.exports = require(\"babel-runtime/helpers/createClass\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/createClass\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"babel-runtime/core-js/promise\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/promise\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 6\n// module chunks = 0","'use strict';\r\n\r\n/* -------------- imports -------------- */\r\n// external\r\nimport mongoose from 'mongoose';\r\n\r\n//locals\r\nimport ArticleRepository from './mongooseRepositories/articleRepository.js';\r\nimport TagRepository from './mongooseRepositories/tagRepository.js';\r\nimport UserRepository from './mongooseRepositories/userRepository.js';\r\nimport CommentRepository from './mongooseRepositories/commentRepository.js';\r\n\r\n/* -------------- implementation -------------- */\r\nvar connect = function connect() {\r\n  mongoose.Promise = global.Promise;\r\n  \r\n  // TODO: move to config file\r\n  mongoose.connect(\"mongodb://zlov:0429935@ds019488.mlab.com:19488/heroku_n0v8cmmh\");\r\n  return mongoose.connection;\r\n};\r\nconnect();\r\n\r\n// create repositories\r\nconst articleRepository = new ArticleRepository();\r\nconst tagRepository = new TagRepository();\r\nconst userRepository = new UserRepository();\r\nconst commentRepository = new CommentRepository();\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport {\r\n  articleRepository,\r\n  tagRepository,\r\n  userRepository,\r\n  commentRepository\r\n};\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/index.js","'use strict';\r\n\r\n/* -------------- imports -------------- */\r\n// external\r\n\r\n//locals\r\nimport ArticleService from './articleService.js';\r\nimport TagService from './tagService.js';\r\nimport UserService from './userService.js';\r\nimport CommentService from './commentService.js';\r\n\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nconst articleService = new ArticleService();\r\nconst tagService = new TagService();\r\nconst userService = new UserService();\r\nconst commentService = new CommentService();\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport {\r\n    articleService,\r\n    tagService,\r\n    userService,\r\n    commentService\r\n};\n\n\n// WEBPACK FOOTER //\n// ./bloglog.services/index.js","/* -------------- imports -------------- */\r\n// external\r\n\r\n//locals\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class ArticleModel{\r\n    constructor(id, title, text, description, tags, createDateTime, updateDateTime, user){\r\n      this.id = id;\r\n      this.title = title;\r\n      this.text = text;\r\n      this.description = description;\r\n      this.tags = tags;\r\n      this.createDateTime = createDateTime;\r\n      this.updateDateTime = updateDateTime;\r\n      this.user = user;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.models/articleModel.js","/* -------------- imports -------------- */\r\n// external\r\n\r\n//locals\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class CommentModel{\r\n    constructor(id, text, user, createDateTime, article_id){\r\n      this.id = id;\r\n      this.text = text;\r\n      this.user = user;\r\n      this.createDateTime = createDateTime;\r\n      this.article_id = article_id;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.models/commentModel.js","/* -------------- imports -------------- */\r\n// external\r\n\r\n//locals\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class TagModel{\r\n    constructor(id, value, article_ids){\r\n      this.id = id;\r\n      this.value = value;\r\n      this.article_ids = article_ids;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.models/tagModel.js","/* -------------- imports -------------- */\r\n// external\r\n\r\n//locals\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class UserModel{\r\n    constructor(id, name, email, password){\r\n      this.id = id;\r\n      this.name = name;\r\n      this.email = email;\r\n      this.password = password;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.models/userModel.js","module.exports = require(\"babel-runtime/core-js/get-iterator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/get-iterator\"\n// module id = 13\n// module chunks = 0","'use strict';\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\n// import articleRoutes from './articleRoutes.js';\r\n\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class PageResult{\r\n    constructor(data, count){\r\n      this.data = data;\r\n      this.count = count;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.common/pageResult.js","module.exports = require(\"passport\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"ts-md5/dist/md5\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ts-md5/dist/md5\"\n// module id = 16\n// module chunks = 0","module.exports = {\n\t\"port\": 8080,\n\t\"bodyLimit\": \"100kb\",\n\t\"corsHeaders\": [\n\t\t\"Link\"\n\t]\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../config.json\n// module id = 17\n// module chunks = 0","/* -------------- imports -------------- */\r\n// external\r\nimport { Router } from 'express';\r\n\r\n//locals\r\nimport articleRoutes from './articleRoutes.js';\r\nimport tagsRoutes from './tagsRoutes.js';\r\n\r\n/* -------------- implementation -------------- */\r\n// create router\r\nconst router = Router();\r\n\r\n// add article routes\r\nrouter.use('/articles', articleRoutes);\r\n\r\n// add tag routes\r\nrouter.use('/tags', tagsRoutes);\r\n\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport default router;\r\n\n\n\n// WEBPACK FOOTER //\n// ./bloglog.api/index.js","'use strict';\r\n// external\r\nimport passport from 'passport';\r\nimport { ExtractJwt, Strategy as JwtStrategy } from 'passport-jwt';\r\nimport JWT from 'jwt-simple';\r\nimport { Md5 } from 'ts-md5/dist/md5';\r\n\r\n//locals\r\nimport { userService } from '../bloglog.services';\r\nimport UserModel from '../bloglog.models/userModel.js';\r\nimport ResultCodes from '../bloglog.common/resultCodes.js';\r\nimport Result from '../bloglog.common/result.js';\r\n\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nfunction initialize(app) {\r\n    app.use(passport.initialize());\r\n\r\n    let opts = {};\r\n    opts.secretOrKey = \"zlovzlovzlolovlll\";\r\n    opts.jwtFromRequest = ExtractJwt.fromAuthHeader();\r\n    passport.use(new JwtStrategy(opts, function (jwt_payload, done) {\r\n\r\n        userService.get(jwt_payload.email)\r\n            .then(result => {\r\n                if (result.success) {\r\n                    let user = result.data;\r\n                    if (user) {\r\n                        user.password = \"\";\r\n                        return done(null, user);\r\n                    }\r\n\r\n                    return done(null, false, { message: 'invalid credentials' });\r\n                }\r\n\r\n                return done(null, false, { message: 'invalid credentials' });\r\n            })\r\n            .catch(error => {\r\n                return done(error);\r\n            });\r\n\r\n    }));\r\n\r\n    app.post('/signup', function (req, res) {\r\n\r\n        userService.get(req.body.email)\r\n            .then(result => {\r\n\r\n                if (result.success) {\r\n                    return res.json(new Result(null, false, \"user exists\", ResultCodes.ObjectExists()));\r\n                }\r\n\r\n            })\r\n            .catch(refuceResult => {\r\n                // the user should not exist, so we should get refuce from service.\r\n\r\n                if (refuceResult.code === ResultCodes.ObjectNotFound()) {\r\n                    userService.add(\r\n                        new UserModel(\r\n                            null,\r\n                            req.body.name,\r\n                            req.body.email,\r\n                            req.body.password\r\n                        ))\r\n                        .then(result => {\r\n                            return res.json(new Result(null, true, \"user was successfuly created\", ResultCodes.Success()));\r\n                        })\r\n                        .catch(result => {\r\n                            return res.json(new Result(null, false, \"invalid credentials\", ResultCodes.InvalidObject()));\r\n                        });\r\n                } else {\r\n                    return res.json(new Result(refuceResult, false, \"invalid credentials\", ResultCodes.Error()));\r\n                }\r\n\r\n            });\r\n\r\n    });\r\n\r\n    app.post('/login', function (req, res) {\r\n\r\n        userService.get(req.body.email)\r\n            .then(result => {\r\n                if (result.success) {\r\n                    let user = result.data;\r\n                    if (userService.checkPassword(user, req.body.password)) {\r\n                        var token = JWT.encode(user, opts.secretOrKey);\r\n                        \r\n                        return res.json(\r\n                            new Result(\r\n                                { \r\n                                    id: user.id,\r\n                                    token: 'JWT ' + token\r\n                                },\r\n                                true,\r\n                                \"success\",\r\n                                ResultCodes.Success()));\r\n                    }\r\n\r\n                    return res.json(new Result(null, false, \"invalid creadentials\", ResultCodes.Unathorized()));\r\n                }\r\n\r\n                return res.json(new Result(null, false, \"invalid creadentials\", ResultCodes.Unathorized()));\r\n            })\r\n            .catch(error => {\r\n                return res.json(new Result(error, false, \"invalid creadentials\", ResultCodes.Unathorized()));\r\n            });\r\n\r\n    });\r\n}\r\n\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport default { initialize };\r\n\n\n\n// WEBPACK FOOTER //\n// ./bloglog.auth/index.js","/* -------------- imports -------------- */\r\n// external\r\nimport { Router } from 'express';\r\n\r\n//locals\r\n// import articleRoutes from './articleRoutes.js';\r\n// import tagsRoutes from './tagsRoutes.js';\r\n// import userRoutes from './userRoutes.js';\r\n\r\n// import views to bundle them\r\nimport { } from './views/index.html';\r\n\r\n/* -------------- implementation -------------- */\r\n// create router\r\nconst router = Router();\r\n\r\n//\r\nrouter.use('/', function (req, res) {\r\n    res.render('index.html');\r\n});\r\n\r\n/* -------------- exports -------------- */\r\nexport default router;\r\n\n\n\n// WEBPACK FOOTER //\n// ./bloglog.ui/index.js","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 42\n// module chunks = 0","module.exports = require(\"ejs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ejs\"\n// module id = 43\n// module chunks = 0","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 44\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 45\n// module chunks = 0","/* -------------- imports -------------- */\r\n// external\r\nimport { Router } from 'express';\r\nimport passport from 'passport';\r\n\r\n// locals\r\nimport { articleService, commentService } from '../bloglog.services';\r\nimport ArticleModel from '../bloglog.models/articleModel.js';\r\nimport CommentModel from '../bloglog.models/commentModel.js';\r\n\r\nimport Result from '../bloglog.common/result.js';\r\nimport ResultCodes from '../bloglog.common/resultCodes.js';\r\n\r\n\r\n\r\n/* -------------- implementation -------------- */\r\n// create router\r\nconst router = Router();\r\n\r\n/*\r\n    get recent articles\r\n*/\r\nrouter.get('/',\r\n (req, res, next) => {\r\n   \r\n  articleService.getRecent()\r\n    .then((result) => {\r\n      res.json(result);\r\n    })\r\n    .catch((errorResult) => {\r\n      res.json(errorResult);\r\n    });\r\n\r\n});\r\n\r\nrouter.post('/', passport.authenticate('jwt', { session: false}), (req, res, next) => {\r\n  \r\n  articleService.add(\r\n    new ArticleModel(\r\n      null,\r\n      req.body.title,\r\n      req.body.text,\r\n      req.body.description,\r\n      req.body.tags,\r\n      Date.now(),\r\n      Date.now(),\r\n      {\r\n        \"user_id\": req.user.id,\r\n        \"name\": req.user.name\r\n      }))\r\n    .then((result) => res.json(result))\r\n    .catch((errorResult) => res.json(errorResult));\r\n\r\n});\r\n\r\nrouter.post('/:pageNumber/:pageSize', passport.authenticate('jwt', { session: false }), (req, res, next) => {\r\n  \r\n  let pageNumber = Number(req.params.pageNumber);\r\n  let pageSize = Number(req.params.pageSize);\r\n  if (req.body.filterData) {\r\n    articleService.get(req.body.filterData, (pageNumber - 1) * pageSize, pageSize)\r\n      .then((result) => res.json(result))\r\n      .catch((errorResult) => res.json(errorResult));\r\n  } else{\r\n    res.json(new Result(null, false, \"The given body invalid\", ResultCodes.InvalidArguments()));\r\n  }\r\n\r\n});\r\n\r\nrouter.put('/', passport.authenticate('jwt', { session: false }), (req, res, next) => {\r\n\r\n  articleService.update(\r\n    new ArticleModel(\r\n      req.body.id,\r\n      req.body.title,\r\n      req.body.text,\r\n      req.body.description,\r\n      req.body.tags,\r\n      req.body.createDateTime,\r\n      Date.now(),\r\n      {\r\n        \"user_id\": req.user.id,\r\n        \"name\": req.user.name\r\n      }))\r\n    .then(result => res.json(result))\r\n    .catch((errorResult) => res.json(errorResult));\r\n\r\n});\r\n\r\nrouter.delete('/:id', passport.authenticate('jwt', { session: false }), (req, res, next) => {\r\n  \r\n  var article_id = req.params.id;\r\n  articleService.delete(\r\n    new ArticleModel(\r\n      article_id,\r\n      null,\r\n      null,\r\n      null,\r\n      null,\r\n      null,\r\n      {\r\n        \"user_id\": req.user.id,\r\n        \"name\": req.user.name\r\n      }))\r\n    .then(result => res.json(result))\r\n    .catch((errorResult) => res.json(errorResult));\r\n\r\n});\r\n\r\n\r\n///////////// article comments section //////////////////////\r\nrouter.get('/:id/comments', (req, res, next) => {\r\n\r\n  let article_id = req.params.id;\r\n  commentService.getCommentsByArticleId(article_id)\r\n    .then((result) => res.json(result))\r\n    .catch((errorResult) => res.json(errorResult));\r\n\r\n});\r\n\r\nrouter.post('/:id/comments', (req, res, next) => {\r\ndebugger;\r\n  let article_id = req.params.id;\r\n  commentService.add(\r\n    new CommentModel(\r\n      null,\r\n      req.body.text,\r\n      req.body.user,\r\n      Date.now(),\r\n      article_id))\r\n    .then(() => res.sendStatus(200))\r\n    .catch((errorResult) => res.json(errorResult));\r\n\r\n});\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport default router;\n\n\n// WEBPACK FOOTER //\n// ./bloglog.api/articleRoutes.js","// external\r\nimport { Router } from 'express';\r\n\r\n// locals\r\nimport { tagService } from '../bloglog.services';\r\nimport TagModel from '../bloglog.models/tagModel.js';\r\n\r\n// create router\r\nconst router = Router();\r\n\r\n/*\r\n    get all\r\n*/\r\nrouter.get('/', (req, res, next) => {\r\n  tagService.getTagsByText(req.query.text)\r\n    .then(function (result) {\r\n      res.json(result);\r\n    })\r\n    .catch(function (errorResult) {\r\n      res.json(errorResult);\r\n    });\r\n    \r\n});\r\n\r\n// We add tags with articles\r\n// router.post('/', (req, res, next) => {\r\n\r\n//   tagService.add(\r\n//     new TagModel(\r\n//       null,\r\n//       req.body.value,\r\n//       []))\r\n//     .then(() => res.sendStatus(200))\r\n//     .catch((result) => res.json(result));\r\n\r\n// });\r\n\r\nexport default router;\n\n\n// WEBPACK FOOTER //\n// ./bloglog.api/tagsRoutes.js","'use strict';\r\n// external\r\nimport mongoose from 'mongoose';\r\n\r\n//locals\r\n// import articleRoutes from './articleRoutes.js';\r\n\r\n/* -------------- implementation -------------- */\r\nvar articleSchema = new mongoose.Schema({\r\n    'title': {\r\n        type: String,\r\n        required: true\r\n    },\r\n    'text': {\r\n        type: String,\r\n        required: true,\r\n    },\r\n    'description': {\r\n        type: String,\r\n        required: true,\r\n    },\r\n    'tags': {\r\n        type: Array,\r\n        default: []\r\n    },\r\n    'createDateTime': {\r\n        type: Date,\r\n        default: Date.now()\r\n    },\r\n    'updateDateTime': {\r\n        type: Date,\r\n        default: Date.now()\r\n    },\r\n    'user': {\r\n        'user_id': {\r\n            type: mongoose.Schema.Types.ObjectId,\r\n            required: true,\r\n        },\r\n        'name': {\r\n            type: String,\r\n            required: true\r\n        }\r\n    }\r\n});\r\n\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport default mongoose.model('articles', articleSchema);\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseModels/articleDataModel.js","'use strict';\r\n// external\r\nimport mongoose from 'mongoose';\r\n\r\n//locals\r\n// import articleRoutes from './articleRoutes.js';\r\n\r\n/* -------------- implementation -------------- */\r\nvar commentSchema = new mongoose.Schema({\r\n    'article_id': {\r\n        type: mongoose.Schema.Types.ObjectId,\r\n        required: true\r\n    },\r\n    'text': {\r\n        type: String,\r\n        required: true,\r\n    },\r\n    'createDateTime': {\r\n        type: Date,\r\n        default: Date.now()\r\n    },\r\n    'user': {\r\n        'user_id': {\r\n            type: mongoose.Schema.Types.ObjectId,\r\n            required: true,\r\n        },\r\n        'name': {\r\n            type: String,\r\n            required: true\r\n        }\r\n    }\r\n});\r\n\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport default mongoose.model('comments', commentSchema);\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseModels/commentDataModel.js","'use strict';\r\n// external\r\nimport mongoose from 'mongoose';\r\n\r\n//locals\r\n\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nlet tagSchema = new mongoose.Schema({\r\n\t'value': {\r\n\t\ttype: String,\r\n\t\trequired: true,\r\n\t\tunique: true\r\n\t},\r\n\t'articles': {\r\n\t\ttype: Array,\r\n\t\tdefault: []\r\n\t}\r\n});\r\n\r\n/* -------------- exports -------------- */\r\nexport default mongoose.model('tags', tagSchema);\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseModels/tagDataModel.js","'use strict';\r\n// external\r\nimport mongoose from 'mongoose';\r\n\r\n//locals\r\n\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nvar userSchema = new mongoose.Schema({\r\n\t'name': {\r\n\t\ttype: String,\r\n\t\trequired: true,\r\n\t\tunique: true\r\n\t},\r\n\t'email': {\r\n\t\ttype: String,\r\n\t\trequired: true,\r\n\t\tunique: true\r\n\t},\r\n\t'password': {\r\n\t\ttype: String,\r\n\t\trequired: true\r\n\t}\r\n});\r\n\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport default mongoose.model('users', userSchema);\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseModels/userDataModel.js","'use strict';\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\nimport articleDataModel from '../mongooseModels/articleDataModel.js';\r\nimport ArticleModel from '../../bloglog.models/articleModel.js';\r\nimport Result from '../../bloglog.common/result.js';\r\nimport PageResult from '../../bloglog.common/pageResult.js';\r\nimport ResultCodes from '../../bloglog.common/resultCodes.js';\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class ArticleRepository {\r\n    constructor() {\r\n    }\r\n\r\n    /*\r\n     * gets articles\r\n     */\r\n    get(skip, count) {\r\n        return new Promise(function (resolve, reject) {\r\n\r\n            articleDataModel\r\n                .find({})\r\n                .sort('-createDateTime')\r\n                .skip(skip)\r\n                .limit(count)\r\n                .exec(function (err, articles) {\r\n                    if (err) {\r\n                        reject(new Result(null, false, err, ResultCodes.Error()));\r\n                    }\r\n                    else if (!articles) {\r\n                        reject(new Result(null, false, err, ResultCodes.ObjectNotFound()));\r\n                    }\r\n                    else {\r\n                        let articleModels = [];\r\n                        for (let article of articles) {\r\n                            articleModels.push(MapToArticleModel(article));\r\n                        }\r\n\r\n                        articleDataModel.count(function (err, count) {\r\n                            if (err) {\r\n                                reject(new Result(null, false, err, ResultCodes.Error()));\r\n                            }\r\n\r\n                            resolve(new Result(new PageResult(articleModels, count), true, \"\", ResultCodes.Success()));\r\n                        });\r\n                    }\r\n                });\r\n\r\n        });\r\n    }\r\n\r\n    getByTagValue(filterData, skip, count) {\r\n        \r\n        let queryFilter = {};\r\n        if(filterData.tags){\r\n            queryFilter[\"tags\"] = { $all: filterData.tags };\r\n        }\r\n\r\n        return new Promise(function (resolve, reject) {\r\n\r\n            articleDataModel\r\n                .find(queryFilter)\r\n                .sort('-createDateTime')\r\n                .skip(skip)\r\n                .limit(count)\r\n                .exec(function (err, articles) {\r\n                    if (err) {\r\n                        reject(new Result(null, false, err, ResultCodes.Error()));\r\n                    }\r\n                    else if (!articles) {\r\n                        reject(new Result(null, false, err, ResultCodes.ObjectNotFound()));\r\n                    }\r\n                    else {\r\n                        let articleModels = [];\r\n                        for (let article of articles) {\r\n                            articleModels.push(MapToArticleModel(article));\r\n                        }\r\n\r\n                        articleDataModel.count(queryFilter, function (err, count) {\r\n                            if (err) {\r\n                                reject(new Result(null, false, err, ResultCodes.Error()));\r\n                            }\r\n\r\n                            resolve(new Result(new PageResult(articleModels, count), true, \"\", ResultCodes.Success()));\r\n                        });\r\n                    }\r\n                });\r\n        });\r\n    }\r\n\r\n    /*\r\n     * gets article by Id\r\n     */\r\n    getById(id) {\r\n        return new Promise(function (resolve, reject) {\r\n\r\n            articleDataModel\r\n                .findOne({ '_id': id })\r\n                .exec(function (err, article) {\r\n                    if (err) {\r\n                        reject(new Result(null, false, err, ResultCodes.Error()));\r\n                    }\r\n                    else if (!article) {\r\n                        reject(new Result(null, false, err, ResultCodes.ObjectNotFound()));\r\n                    }\r\n                    else {\r\n                        resolve(new Result(MapToArticleModel(article), true, \"\", ResultCodes.Success()));\r\n                    }\r\n                });\r\n\r\n        });\r\n    }\r\n\r\n    /*\r\n     * adds article\r\n     */\r\n    add(articleModel) {\r\n        return new Promise(function (resolve, reject) {\r\n\r\n            articleDataModel.create(articleModel, function (err, articleCreatedDataModel) {\r\n                if (err) {\r\n                    reject(new Result(null, false, err, ResultCodes.Error()));\r\n                }\r\n                else if (!articleCreatedDataModel) {\r\n                    reject(new Result(null, false, err, ResultCodes.Error()));\r\n                }\r\n                else {\r\n                    resolve(new Result(MapToArticleModel(articleCreatedDataModel), true, \"\", ResultCodes.Success()));\r\n                }\r\n            });\r\n\r\n        });\r\n    }\r\n\r\n    /*\r\n     * update article\r\n     */\r\n    update(articleModel) {\r\n        return new Promise(function (resolve, reject) {\r\n\r\n            articleDataModel.findByIdAndUpdate(\r\n                articleModel.id,\r\n                {\r\n                    title: articleModel.title,\r\n                    text: articleModel.text,\r\n                    description: articleModel.description,\r\n                    tags: articleModel.tags\r\n                },\r\n                { new: true },\r\n                function (err, updatedArticleDataModel) {\r\n                    if (err) {\r\n                        reject(new Result(null, false, err, ResultCodes.Error()));\r\n                    }\r\n\r\n                    resolve(new Result(MapToArticleModel(updatedArticleDataModel), true, \"updated succesful\", ResultCodes.Success()));\r\n                });\r\n\r\n        });\r\n    }\r\n\r\n    /*\r\n     * deletes article\r\n     */\r\n    delete(articleModel) {\r\n        return new Promise(function (resolve, reject) {\r\n\r\n            articleDataModel.findByIdAndRemove(articleModel.id, {}, function (err, deletedArticleDataModel) {\r\n                if (err) {\r\n                    reject(new Result(null, false, err, ResultCodes.Error()));\r\n                }\r\n\r\n                resolve(new Result(null, true, \"deleted succesful\", ResultCodes.Success()));\r\n            });\r\n\r\n        });\r\n    }\r\n\r\n};\r\n\r\n\r\nfunction MapToArticleModel(articleDataModel) {\r\n    return new ArticleModel(\r\n        articleDataModel._id,\r\n        articleDataModel.title,\r\n        articleDataModel.text,\r\n        articleDataModel.description,\r\n        articleDataModel.tags,\r\n        articleDataModel.createDateTime,\r\n        articleDataModel.updateDateTime,\r\n        articleDataModel.user);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseRepositories/articleRepository.js","'use strict';\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\nimport commentDataModel from '../mongooseModels/commentDataModel.js';\r\nimport CommentModel from '../../bloglog.models/commentModel.js';\r\nimport Result from '../../bloglog.common/result.js';\r\nimport PageResult from '../../bloglog.common/pageResult.js';\r\nimport ResultCodes from '../../bloglog.common/resultCodes.js';\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class CommentRepository {\r\n    constructor() {\r\n    }\r\n\r\n    /*\r\n     * gets comments of the given article\r\n     */\r\n    getByArticleId(article_id) {\r\n        return new Promise(function (resolve, reject) {\r\n\r\n            commentDataModel\r\n                .find({ 'article_id': article_id })\r\n                .sort('-createDateTime')\r\n                .exec(function (err, comments) {\r\n                    if (err) {\r\n                        reject(new Result(null, false, err, ResultCodes.Error()));\r\n                    }\r\n                    else if (!comments) {\r\n                        reject(new Result(null, false, err, ResultCodes.ObjectNotFound()));\r\n                    }\r\n                    else {\r\n                        let commentModels = [];\r\n                        for (let comment of comments) {\r\n                            commentModels.push(MapToCommentModel(comment));\r\n                        }\r\n                        resolve(new Result(commentModels, true, \"\", ResultCodes.Success()));\r\n                    }\r\n                });\r\n\r\n        });\r\n    }\r\n\r\n    /*\r\n     * adds comment\r\n     */\r\n    add(commentModel) {\r\n        return new Promise(function (resolve, reject) {\r\n\r\n            commentDataModel.create(commentModel, function (err, commentCreatedDataModel) {\r\n                if (err) {\r\n                    reject(new Result(null, false, err, ResultCodes.Error()));\r\n                }\r\n                else if (!commentCreatedDataModel) {\r\n                    reject(new Result(null, false, err, ResultCodes.Error()));\r\n                }\r\n                else {\r\n                    resolve(new Result(MapToCommentModel(commentCreatedDataModel), true, \"\", ResultCodes.Success()));\r\n                }\r\n            });\r\n\r\n        });\r\n    }\r\n\r\n}\r\n\r\nfunction MapToCommentModel(commentDataModel) {\r\n    return new CommentModel(\r\n        commentDataModel._id,\r\n        commentDataModel.text,\r\n        commentDataModel.user,\r\n        commentDataModel.createDateTime,\r\n        commentDataModel.article_id);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseRepositories/commentRepository.js","'use strict';\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\nimport tagDataModel from '../mongooseModels/tagDataModel.js';\r\nimport TagModel from '../../bloglog.models/tagModel.js';\r\nimport Result from '../../bloglog.common/result.js';\r\nimport ResultCodes from '../../bloglog.common/resultCodes.js';\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class TagRepository {\r\n  constructor() {\r\n  }\r\n\r\n  /*\r\n   * gets tags by values\r\n   */\r\n  getByValues(values) {\r\n      \r\n      return new Promise(function (resolve, reject) {\r\n          tagDataModel\r\n              .find({value: {$in: values}})\r\n              .exec(function (err, tags) {\r\n                  if (err) {\r\n                      reject(new Result(null, false, err, ResultCodes.Error()));\r\n                  }\r\n                  else if (!tags) {\r\n                      reject(new Result(null, false, err, ResultCodes.ObjectNotFound()));\r\n                  }\r\n                  else {\r\n                      let tagModels = [];\r\n                      for (let tag of tags) {\r\n                          tagModels.push(MapToTagModel(tag));\r\n                      }\r\n\r\n                      resolve(new Result(tagModels, true, \"\", ResultCodes.Success()));\r\n                  }\r\n              });\r\n      });\r\n  };\r\n\r\n  /*\r\n   * gets tags, that contain given text in values\r\n   */\r\n  getContainsText(text) {\r\n\r\n      return new Promise(function (resolve, reject) {\r\n          tagDataModel\r\n              .find({ value: { \"$regex\": text, \"$options\": \"i\" } })\r\n              .exec(function (err, tags) {\r\n                  if (err) {\r\n                      reject(new Result(null, false, err, ResultCodes.Error()));\r\n                  }\r\n                  else if (!tags) {\r\n                      reject(new Result(null, false, err, ResultCodes.ObjectNotFound()));\r\n                  }\r\n                  else {\r\n                      let tagModels = [];\r\n                      for (let tag of tags) {\r\n                          tagModels.push(MapToTagModel(tag));\r\n                      }\r\n\r\n                      resolve(new Result(tagModels, true, \"\", ResultCodes.Success()));\r\n                  }\r\n              });\r\n      });\r\n  };\r\n\r\n  getArticleIdsByTagIds(tagIds, skip, count) {\r\n      return new Promise(function (resolve, reject) {\r\n          \r\n          tagDataModel\r\n              .find({ _id: { \"$in\": tagIds } })\r\n              .exec(function (err, tags) {\r\n                  if (err) {\r\n                      reject(new Result(null, false, err, ResultCodes.Error()));\r\n                  }\r\n                  else if (!tags) {\r\n                      reject(new Result(null, false, err, ResultCodes.ObjectNotFound()));\r\n                  }\r\n                  else {\r\n                      let tagModels = [];\r\n                      for (let tag of tags) {\r\n                          tagModels.push(MapToTagModel(tag));\r\n                      }\r\n\r\n                      resolve(new Result(tagModels, true, \"\", ResultCodes.Success()));\r\n                  }\r\n              });\r\n      });\r\n  }\r\n\r\n  createOrUpdateByArticleId(articleId, tagValues) {\r\n      return new Promise(function (resolve, reject) {\r\n\r\n          let updates = [];\r\n          for (let tagValue of tagValues) {\r\n              updates.push({\r\n                  q: { value: tagValue }, // query - selector for which item apply updates\r\n                  u: { $set: { value: tagValue }, $addToSet: { articles: articleId } }, // updates - what updates apply to item\r\n                  upsert: true // if item does not exists - creates new one.\r\n              });\r\n          }\r\n          \r\n          tagDataModel.db.db.command({\r\n              update: \"tags\",\r\n              updates: updates,\r\n              ordered: true,\r\n              writeConcern: { w: \"majority\", wtimeout: 10000 }\r\n          })\r\n            .then(commandResult =>\r\n                resolve(new Result(commandResult.upserted, true, \"Success\", ResultCodes.Success()))\r\n            ).catch(() =>\r\n                reject(\r\n                    new Result(\r\n                        commandResult,\r\n                        false,\r\n                        update.writeErrors ? update.writeErrors.errmsg : \"\" + \". \" + update.writeConcernError ? update.writeConcernError.errmsg : \"\",\r\n                        ResultCodes.Error()))\r\n            );\r\n      });\r\n  }\r\n\r\n  /*\r\n   * adds tag\r\n   */\r\n  add(tag) {\r\n    return tagDataModel.create(tag);\r\n  };\r\n};\r\n\r\n\r\nfunction MapToTagModel(tagDataModel) {\r\n    return new TagModel(\r\n        tagDataModel._id,\r\n        tagDataModel.value,\r\n        tagDataModel.articles_ids);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseRepositories/tagRepository.js","'use strict';\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\nimport userDataModel from '../mongooseModels/userDataModel.js';\r\nimport UserModel from '../../bloglog.models/userModel.js';\r\nimport Result from '../../bloglog.common/result.js';\r\nimport ResultCodes from '../../bloglog.common/resultCodes.js';\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class UserRepository {\r\n  constructor() {\r\n  }\r\n\r\n  /*\r\n   * gets user\r\n   */\r\n  get(email) {\r\n\r\n    return new Promise(function (resolve, reject) {\r\n      userDataModel\r\n        .findOne({ \"email\": email })\r\n        .exec(function (err, user) {\r\n          if (err) {\r\n            reject(new Result(null, false, err, ResultCodes.Error()));\r\n          }\r\n          else if (!user) {\r\n            reject(new Result(null, false, err, ResultCodes.ObjectNotFound()));\r\n          }\r\n          else {\r\n            resolve(new Result(MapToUserModel(user), true, \"\", ResultCodes.Success()));\r\n          }\r\n        });\r\n    });\r\n\r\n  };\r\n\r\n  /*\r\n   * adds tag\r\n   */\r\n  add(user) {\r\n    return userDataModel.create(user);\r\n  };\r\n};\r\n\r\nfunction MapToUserModel(user) {\r\n  return new UserModel(\r\n    user._id,\r\n    user.name,\r\n    user.email,\r\n    user.password\r\n  );\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseRepositories/userRepository.js","/* -------------- imports -------------- */\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\nimport Article from '../bloglog.models/articleModel.js';\r\nimport { articleRepository } from '../bloglog.repositories';\r\nimport Result from '../bloglog.common/result.js';\r\nimport ResultCodes from '../bloglog.common/resultCodes.js';\r\nimport { tagService } from '../bloglog.services';\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class ArticleService {\r\n  constructor() {\r\n  }\r\n\r\n  /*\r\n   * gets recent articles\r\n   */\r\n  getRecent() {\r\n    return articleRepository.get(0, 10);\r\n  };\r\n\r\n  get(filterData, skip, count){\r\n    \r\n    return new Promise(function (resolve, reject) {\r\n      articleRepository.getByTagValue(filterData, skip, count)\r\n        .then(result => {\r\n          resolve(result);\r\n        })\r\n        .catch(errorResult => {\r\n          reject(errorResult);\r\n        });\r\n\r\n    });\r\n  }\r\n\r\n  /*\r\n   * adds article\r\n   */\r\n  add(articleModel) {\r\n\r\n    if (checkArticle(articleModel)) {\r\n      return new Promise(function (resolve, reject) {\r\n\r\n        articleRepository.add(articleModel)\r\n          .then(addArticleResult => {\r\n            tagService.createOrUpdateByArticleId(addArticleResult.data.id, articleModel.tags)\r\n              .then((result) => {\r\n                resolve(addArticleResult);\r\n              })\r\n              .catch((errorResult) => {\r\n                reject(errorResult);\r\n              });\r\n          })\r\n          .catch(addArticleErrorResult => resolve(addArticleErrorResult));\r\n      });\r\n    }\r\n\r\n    return Promise.reject(new Result(null, false, \"\", ResultCodes.InvalidObject()));\r\n  };\r\n\r\n  /*\r\n   * updates given article\r\n   */\r\n  update(articleModel) {\r\n\r\n    // if articleModel is not valid - return error\r\n    if(!checkArticle(articleModel)){\r\n        return Promise.reject(new Result(null, false, \"The given article is not valid\", ResultCodes.InvalidObject()));\r\n    }\r\n\r\n    return new Promise(function (resolve, reject) {\r\n\r\n      // find given article in storage\r\n      articleRepository.getById(articleModel.id)\r\n        .then(function (result) {\r\n\r\n          if (result.success) {\r\n            let articleFromStorage = result.data;\r\n\r\n            // Check the article does not change owner. (i.e. check that you update your own article)\r\n            if (articleFromStorage.user.user_id.equals(articleModel.user.user_id)) {\r\n\r\n              articleFromStorage.title = articleModel.title;\r\n              articleFromStorage.text = articleModel.text;\r\n              articleFromStorage.description = articleModel.description;\r\n              articleFromStorage.tags = articleModel.tags;\r\n              // TODO: update tags table when tags were changed.\r\n\r\n              articleRepository.update(articleModel)\r\n                .then(result => {\r\n                  resolve(result);\r\n                })\r\n                .catch(errorResult => {\r\n                  reject(errorResult);\r\n                });\r\n              return;\r\n            }\r\n            \r\n            // given article and stored article have different owners - it is error:\r\n            // the article can't change the owner\r\n            reject(new Result(null, false, \"Given article has wrong user_id. The article can't change the owner.\", ResultCodes.InvalidObject()));\r\n          }\r\n          else{\r\n            reject(result);\r\n          }\r\n\r\n        })\r\n        .catch(function (errorResult) {\r\n          // article was not found in storage or some error occured\r\n          reject(errorResult);\r\n        });\r\n        \r\n    });\r\n  }\r\n\r\n  /*\r\n   * deletes given article\r\n   */\r\n  delete(articleModel) {\r\n    \r\n    return new Promise(function (resolve, reject) {\r\n\r\n      // find given article in storage\r\n      articleRepository.getById(articleModel.id)\r\n        .then(function (result) {\r\n\r\n          if (result.success) {\r\n            let articleFromStorage = result.data;\r\n\r\n            // Check the article does not change owner.\r\n            if (articleFromStorage.user.user_id.equals(articleModel.user.user_id)) {\r\n\r\n              // TODO: delete tagsfrom tags table.\r\n              articleRepository.delete(articleModel)\r\n                .then(result => {\r\n                  resolve(result);\r\n                })\r\n                .catch(errorResult => {\r\n                  reject(errorResult);\r\n                });\r\n              return;\r\n            }\r\n\r\n            // given article and stored article have different owners - it is error:\r\n            // the article can't change the owner\r\n            reject(new Result(null, false, \"Given article has wrong user_id. The article can't change the owner.\", ResultCodes.InvalidObject()));\r\n          }\r\n          else {\r\n            reject(result);\r\n          }\r\n        })\r\n        .catch(function (errorResult) {\r\n          // article was not found in storage or some error occured\r\n          reject(errorResult);\r\n        });\r\n    });\r\n  }\r\n  \r\n};\r\n\r\nfunction checkArticle(article) {\r\n  if (!article.title\r\n    || article.title.length === 0\r\n    || article.title.length > 150) {\r\n    return false;\r\n  }\r\n\r\n  if (!article.description\r\n    || article.description.length === 0\r\n    || article.description.length > 300) {\r\n    return false;\r\n  }\r\n\r\n  if (!article.text\r\n    || article.text.length === 0\r\n    || article.text.length > 20000) {\r\n    return false;\r\n  }\r\n\r\n  if (!article.user\r\n    || !article.user.user_id\r\n    || !article.user.name) {\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.services/articleService.js","/* -------------- imports -------------- */\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\nimport Comment from '../bloglog.models/commentModel.js';\r\nimport { commentRepository, articleRepository } from '../bloglog.repositories';\r\nimport Result from '../bloglog.common/result.js';\r\nimport ResultCodes from '../bloglog.common/resultCodes.js';\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class CommentService {\r\n  constructor() {\r\n  }\r\n\r\n  /*\r\n   * gets tags\r\n   */\r\n  getCommentsByArticleId(article_id) {\r\n    return commentRepository.getByArticleId(article_id);\r\n  };\r\n\r\n  /*\r\n   * adds comment to article\r\n   */\r\n  add(commentModel) {\r\n\r\n    // if commentModel is not valid - return error\r\n    if (!checkComment(commentModel)) {\r\n      return Promise.reject(new Result(null, false, \"The given comment is not valid\", ResultCodes.InvalidObject()));\r\n    }\r\n\r\n    return new Promise(function (resolve, reject) {\r\n\r\n      articleRepository.getById(commentModel.article_id)\r\n\r\n        .then(function (result) {\r\n          if (result.success) {\r\n            commentRepository.add(commentModel)\r\n              .then(result => {\r\n                if (result.success) {\r\n                  resolve(result);\r\n                }\r\n                else {\r\n                  reject(result);\r\n                }\r\n              })\r\n              .catch(errorResult => {\r\n                reject(errorResult);\r\n              });\r\n          }\r\n          else {\r\n            reject(result);\r\n          }\r\n        })\r\n\r\n        .catch(function (errorResult) {\r\n          reject(new Result(null, false, errorResult.message, errorResult.code));\r\n        });\r\n\r\n    });\r\n  }\r\n\r\n}\r\n\r\n\r\n// inner functions\r\nfunction checkComment(comment) {\r\n  if (!comment.text\r\n    || comment.text.length === 0\r\n    || comment.text.length > 5000) {\r\n    return false;\r\n  }\r\n\r\n  if (!comment.user\r\n    || !comment.user.user_id\r\n    || !comment.user.name\r\n  ) {\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.services/commentService.js","/* -------------- imports -------------- */\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\nimport Tag from '../bloglog.models/tagModel.js';\r\nimport { tagRepository } from '../bloglog.repositories';\r\nimport Result from '../bloglog.common/result.js';\r\nimport ResultCodes from '../bloglog.common/resultCodes.js';\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class TagService {\r\n  constructor() {\r\n  }\r\n\r\n  /*\r\n   * gets tags contains text\r\n   */\r\n  getTagsByText(text) {\r\n    return tagRepository.getContainsText(text);\r\n  };\r\n\r\n  /*\r\n   * gets tags by values\r\n   */\r\n  getArticleIdsByTagIds(tagIds, skip, count) {\r\n    if(Array.isArray(tagIds)){\r\n        return tagRepository.getArticleIdsByTagIds(tagIds, skip, count);\r\n    }\r\n\r\n    return Promise.reject(new Result(null, false, \"Given tagIds is not Array\", ResultCodes.InvalidObject()))\r\n  };\r\n\r\n  /*\r\n   * creates or updates tags with articleId\r\n   */\r\n  createOrUpdateByArticleId(articleId, tagValues) {\r\n    if (Array.isArray(tagValues)) {\r\n      return tagRepository.createOrUpdateByArticleId(articleId, tagValues);\r\n    }\r\n\r\n    return Promise.reject(new Result(null, false, \"Given tag values is not Array\", ResultCodes.InvalidObject()))\r\n  }\r\n\r\n  /*\r\n   * adds tag\r\n   */\r\n  add(tagModel) {\r\n    if(checkTag(tagModel)){\r\n        return new tagRepository.add(tagModel);\r\n    }\r\n\r\n    return Promise.reject(new Result(null, false, \"\", ResultCodes.InvalidObject()));\r\n  };\r\n};\r\n\r\n\r\nfunction checkTag(tag){\r\n    if(!tag.value\r\n      || tag.value.length === 0\r\n      || tag.value.length > 50){\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./bloglog.services/tagService.js","/* -------------- imports -------------- */\r\n// external\r\nimport { Md5 } from 'ts-md5/dist/md5';\r\n\r\n//locals\r\nimport User from '../bloglog.models/userModel.js';\r\nimport { userRepository } from '../bloglog.repositories';\r\nimport Result from '../bloglog.common/result.js';\r\nimport ResultCodes from '../bloglog.common/resultCodes.js';\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class UserService {\r\n  constructor() {\r\n  }\r\n\r\n  /*\r\n   * gets user\r\n   */\r\n  get(email) {\r\n\r\n    return userRepository.get(email);\r\n    \r\n  };\r\n\r\n  /*\r\n   * adds user\r\n   */\r\n  add(userModel) {\r\n\r\n    if (checkUser(userModel)) {\r\n      // we must not keep password as it is - so we hash it.\r\n      userModel.password = Md5.hashStr(userModel.password);\r\n      return new userRepository.add(userModel);\r\n    }\r\n\r\n    return Promise.reject(new Result(null, false, \"\", ResultCodes.InvalidObject()));\r\n\r\n  };\r\n\r\n  checkPassword(user, password){\r\n    return user.password === Md5.hashStr(password);\r\n  }\r\n};\r\n\r\nfunction checkUser(user) {\r\n  if (!user.email\r\n    || user.email.length === 0\r\n    || user.email.length > 100) {\r\n    return false;\r\n  }\r\n\r\n  if (!user.name\r\n    || user.name.length === 0\r\n    || user.name.length > 100) {\r\n    return false;\r\n  }\r\n\r\n  if (!user.password\r\n    || user.password.length === 0\r\n    || user.password.length > 100) {\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.services/userService.js","module.exports = __webpack_public_path__ + \"./views/index.html\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./bloglog.ui/views/index.html\n// module id = 60\n// module chunks = 0","module.exports = require(\"jwt-simple\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jwt-simple\"\n// module id = 61\n// module chunks = 0","module.exports = require(\"passport-jwt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport-jwt\"\n// module id = 62\n// module chunks = 0","'use strict';\r\n\r\n// internal\r\nimport path from 'path';\r\n\r\n// external\r\nimport express from 'express';\r\nimport http from 'http';\r\nimport bodyParser from 'body-parser';\r\n\r\n// locals\r\nimport config from '../config.json';\r\nimport apiRoutes from './bloglog.api';\r\nimport uiRoutes from './bloglog.ui';\r\nimport auth from './bloglog.auth';\r\n\r\n// create app\r\nconst app = express();\r\napp.server = http.createServer(app);\r\n\r\n// parsing application/json body\r\napp.use(bodyParser.json());\r\n\r\n// make static files server\r\napp.use(express.static('./dist'));\r\napp.use(express.static('./node_modules'));\r\n\r\n// configure views\r\napp.set('view engine', 'html');\r\napp.engine('html', require('ejs').renderFile);\r\napp.set('views', path.join(__dirname, '/views'));\r\n\r\n// init auth\r\nauth.initialize(app);\r\n\r\n// set routes\r\napp.use('/api', apiRoutes);\r\napp.use('/', uiRoutes);\r\n\r\n// start server.\r\napp.server.listen(process.env.PORT || config.port);\n\n\n// WEBPACK FOOTER //\n// ./index.js"],"sourceRoot":""}