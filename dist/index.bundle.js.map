{"version":3,"sources":["webpack:///webpack/bootstrap 234fd73d5f256f9650f8","webpack:///external \"babel-runtime/helpers/classCallCheck\"","webpack:///external \"babel-runtime/helpers/createClass\"","webpack:///./bloglog.common/result.js","webpack:///./bloglog.common/resultCodes.js","webpack:///external \"babel-runtime/core-js/promise\"","webpack:///external \"express\"","webpack:///external \"mongoose\"","webpack:///./bloglog.models/userModel.js","webpack:///./bloglog.repositories/index.js","webpack:///./bloglog.services/index.js","webpack:///./bloglog.models/articleModel.js","webpack:///./bloglog.models/commentModel.js","webpack:///./bloglog.models/tagModel.js","webpack:///external \"babel-runtime/core-js/get-iterator\"","webpack:///./bloglog.common/pageResult.js","webpack:///external \"passport\"","webpack:///../config.json","webpack:///./bloglog.api/index.js","webpack:///./bloglog.auth/index.js","webpack:///./bloglog.ui/index.js","webpack:///external \"body-parser\"","webpack:///external \"ejs\"","webpack:///external \"http\"","webpack:///external \"path\"","webpack:///./bloglog.api/articleRoutes.js","webpack:///./bloglog.api/tagsRoutes.js","webpack:///./bloglog.api/userRoutes.js","webpack:///./bloglog.repositories/mongooseModels/articleDataModel.js","webpack:///./bloglog.repositories/mongooseModels/commentDataModel.js","webpack:///./bloglog.repositories/mongooseModels/tagDataModel.js","webpack:///./bloglog.repositories/mongooseModels/userDataModel.js","webpack:///./bloglog.repositories/mongooseRepositories/articleRepository.js","webpack:///./bloglog.repositories/mongooseRepositories/commentRepository.js","webpack:///./bloglog.repositories/mongooseRepositories/tagRepository.js","webpack:///./bloglog.repositories/mongooseRepositories/userRepository.js","webpack:///./bloglog.services/articleService.js","webpack:///./bloglog.services/commentService.js","webpack:///./bloglog.services/tagService.js","webpack:///./bloglog.services/userService.js","webpack:///./bloglog.ui/views/index.html","webpack:///external \"passport-local\"","webpack:///external \"ts-md5/dist/md5\"","webpack:///./index.js"],"names":["Result","data","success","message","code","ResultCodes","UserModel","id","name","email","password","connect","Promise","global","connection","articleRepository","tagRepository","userRepository","commentRepository","articleService","tagService","userService","commentService","ArticleModel","title","text","tags","createDateTime","updateDateTime","user","CommentModel","article_id","TagModel","value","article_ids","PageResult","count","router","use","initialize","app","session","serializeUser","done","deserializeUser","get","then","result","err","catchcatch","post","authenticate","successRedirect","failureRedirect","failureFlash","req","res","logout","redirect","usernameField","passwordField","username","catch","error","passReqToCallback","refuceResult","ObjectNotFound","add","body","_doc","render","next","getRecent","json","errorResult","Date","now","sendStatus","params","getCommentsByArticleId","getTags","end","articleSchema","Schema","type","String","required","default","Types","ObjectId","model","commentSchema","tagSchema","unique","Array","userSchema","ArticleRepository","skip","resolve","reject","find","sort","limit","exec","articles","Error","articleModels","article","push","MapToArticleModel","Success","findOne","create","articleDataModel","_id","CommentRepository","comments","commentModels","comment","MapToCommentModel","commentDataModel","TagRepository","tagModels","tag","MapToTagModel","tagDataModel","articles_ids","UserRepository","MapToUserModel","ArticleService","articleModel","checkArticle","InvalidObject","length","user_id","TagService","getByArticleId","commentModel","getById","checkComment","tagModel","checkTag","UserService","userModel","checkUser","hashStr","server","createServer","static","set","engine","require","renderFile","join","__dirname","listen","process","env","PORT","port"],"mappings":"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","file":"index.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 49);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 234fd73d5f256f9650f8","module.exports = require(\"babel-runtime/helpers/classCallCheck\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/classCallCheck\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/createClass\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/createClass\"\n// module id = 1\n// module chunks = 0","'use strict';\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\n// import articleRoutes from './articleRoutes.js';\r\n\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class Result{\r\n    constructor(data, success, message, code){\r\n      this.data = data;\r\n      this.success = success;\r\n      this.message = message;\r\n      this.code = code;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.common/result.js","'use strict';\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\n// import articleRoutes from './articleRoutes.js';\r\n\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class ResultCodes{\r\n    static Error() { return -1;}\r\n    static Success() { return 0;}\r\n\r\n    \r\n    static InvalidObject() { return 1;}\r\n    static ObjectNotFound() { return 2;}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.common/resultCodes.js","module.exports = require(\"babel-runtime/core-js/promise\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/promise\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 6\n// module chunks = 0","/* -------------- imports -------------- */\r\n// external\r\n\r\n//locals\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class UserModel{\r\n    constructor(id, name, email, password){\r\n      this.id = id;\r\n      this.name = name;\r\n      this.email = email;\r\n      this.password = password;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.models/userModel.js","'use strict';\r\n\r\n/* -------------- imports -------------- */\r\n// external\r\nimport mongoose from 'mongoose';\r\n\r\n//locals\r\nimport ArticleRepository from './mongooseRepositories/articleRepository.js';\r\nimport TagRepository from './mongooseRepositories/tagRepository.js';\r\nimport UserRepository from './mongooseRepositories/userRepository.js';\r\nimport CommentRepository from './mongooseRepositories/commentRepository.js';\r\n\r\n/* -------------- implementation -------------- */\r\nvar connect = function connect() {\r\n  mongoose.Promise = global.Promise;\r\n  \r\n  // TODO: move to config file\r\n  mongoose.connect(\"mongodb://zlov:0429935@ds019488.mlab.com:19488/heroku_n0v8cmmh\");\r\n  return mongoose.connection;\r\n};\r\nconnect();\r\n\r\n// create repositories\r\nconst articleRepository = new ArticleRepository();\r\nconst tagRepository = new TagRepository();\r\nconst userRepository = new UserRepository();\r\nconst commentRepository = new CommentRepository();\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport {\r\n  articleRepository,\r\n  tagRepository,\r\n  userRepository,\r\n  commentRepository\r\n};\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/index.js","'use strict';\r\n\r\n/* -------------- imports -------------- */\r\n// external\r\n\r\n//locals\r\nimport ArticleService from './articleService.js';\r\nimport TagService from './tagService.js';\r\nimport UserService from './userService.js';\r\nimport CommentService from './commentService.js';\r\n\r\n/* -------------- implementation -------------- */\r\nconst articleService = new ArticleService();\r\nconst tagService = new TagService();\r\nconst userService = new UserService();\r\nconst commentService = new CommentService();\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport {\r\n    articleService,\r\n    tagService,\r\n    userService,\r\n    commentService\r\n};\n\n\n// WEBPACK FOOTER //\n// ./bloglog.services/index.js","/* -------------- imports -------------- */\r\n// external\r\n\r\n//locals\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class ArticleModel{\r\n    constructor(id, title, text, tags, createDateTime, updateDateTime, user){\r\n      this.id = id;\r\n      this.title = title;\r\n      this.text = text;\r\n      this.tags = tags;\r\n      this.createDateTime = createDateTime;\r\n      this.updateDateTime = updateDateTime;\r\n      this.user = user;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.models/articleModel.js","/* -------------- imports -------------- */\r\n// external\r\n\r\n//locals\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class CommentModel{\r\n    constructor(id, text, user, createDateTime, article_id){\r\n      this.id = id;\r\n      this.text = text;\r\n      this.user = user;\r\n      this.createDateTime = createDateTime;\r\n      this.article_id = article_id;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.models/commentModel.js","/* -------------- imports -------------- */\r\n// external\r\n\r\n//locals\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class TagModel{\r\n    constructor(id, value, article_ids){\r\n      this.id = id;\r\n      this.value = value;\r\n      this.article_ids = article_ids;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.models/tagModel.js","module.exports = require(\"babel-runtime/core-js/get-iterator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/get-iterator\"\n// module id = 13\n// module chunks = 0","'use strict';\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\n// import articleRoutes from './articleRoutes.js';\r\n\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class PageResult{\r\n    constructor(data, count){\r\n      this.data = data;\r\n      this.count = count;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.common/pageResult.js","module.exports = require(\"passport\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport\"\n// module id = 15\n// module chunks = 0","module.exports = {\n\t\"port\": 8080,\n\t\"bodyLimit\": \"100kb\",\n\t\"corsHeaders\": [\n\t\t\"Link\"\n\t]\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../config.json\n// module id = 16\n// module chunks = 0","/* -------------- imports -------------- */\r\n// external\r\nimport { Router } from 'express';\r\n\r\n//locals\r\nimport articleRoutes from './articleRoutes.js';\r\nimport tagsRoutes from './tagsRoutes.js';\r\nimport userRoutes from './userRoutes.js';\r\n\r\n/* -------------- implementation -------------- */\r\n// create router\r\nconst router = Router();\r\n\r\n// add article routes\r\nrouter.use('/articles', articleRoutes);\r\n\r\n// add tag routes\r\nrouter.use('/tags', tagsRoutes);\r\n\r\n// add user routes\r\nrouter.use('/users', userRoutes);\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport default router;\r\n\n\n\n// WEBPACK FOOTER //\n// ./bloglog.api/index.js","'use strict';\r\n// external\r\nimport passport from 'passport';\r\nimport {Strategy as LocalStrategy} from 'passport-local';\r\n\r\n//locals\r\nimport { userService } from '../bloglog.services';\r\nimport UserModel from '../bloglog.models/userModel.js';\r\nimport ResultCodes from '../bloglog.common/resultCodes.js';\r\n\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nfunction initialize(app) {\r\n    app.use(passport.initialize());\r\n    app.use(passport.session());\r\n\r\n    // used to serialize the user for the session\r\n    passport.serializeUser(function(user, done) {\r\n        done(null, user.email);\r\n    });\r\n\r\n    // used to deserialize the user\r\n    passport.deserializeUser(function (email, done) {\r\n\r\n        userService.get(email)\r\n            .then(result => {\r\n                if (result.success) {\r\n                    return done(err, user);\r\n                }\r\n            }).catchcatch(error => {\r\n                done(err);\r\n            });\r\n\r\n    });\r\n\r\n    app.post('/login',\r\n        passport.authenticate('local', {\r\n            successRedirect: '/',\r\n            failureRedirect: '/#/login',\r\n            failureFlash: true\r\n        })\r\n    );\r\n\r\n    app.post('/signup',\r\n        passport.authenticate('signup', {\r\n            successRedirect: '/',\r\n            failureRedirect: '/#/login',\r\n            failureFlash: true\r\n        })\r\n    );\r\n\r\n    app.get('/logout', function (req, res) {\r\n        req.logout();\r\n        res.redirect('/');\r\n    });\r\n\r\n    passport.use('local',\r\n        new LocalStrategy({\r\n            usernameField: 'email',\r\n            passwordField: 'password'\r\n        },\r\n            function (username, password, done) {\r\n                debugger;\r\n                userService.get(username)\r\n                    .then(result => {\r\n                        if (result.success) {\r\n                            // TODO: compare password.\r\n                            return done(null, result.data);\r\n                        }\r\n\r\n                        return done(null, false, { message: 'Invalid credentials.' });\r\n                    })\r\n                    .catch(error => {\r\n                        return done(error);\r\n                    });\r\n            }\r\n        ));\r\n\r\n    passport.use('signup',\r\n        new LocalStrategy({\r\n            usernameField: 'email',\r\n            passwordField: 'password',\r\n            passReqToCallback : true\r\n        },\r\n            function (req, username, password, done) {\r\n                \r\n                userService.get(username, password)\r\n                    .then(result => {\r\n\r\n                        if (result.success) {\r\n                            return done(null, false, {message: \"user exists.\"});\r\n                        }\r\n\r\n                    })\r\n                    .catch(refuceResult => {\r\n                        // the user should not exist, so we should get refuce from service.\r\n\r\n                        if (refuceResult.code === ResultCodes.ObjectNotFound()) {\r\n                            userService.add(\r\n                                new UserModel(\r\n                                    null,\r\n                                    req.body.name,\r\n                                    req.body.email,\r\n                                    req.body.password\r\n                                ))\r\n                                .then(result => {\r\n                                    passport.authenticate('local', { failureRedirect: '/#login' });\r\n                                    return done(null, result._doc);\r\n                                })\r\n                                .catch(result => {\r\n                                    return done(null, false, { message: 'Invalid credentials.' });\r\n                                });\r\n                        } else {\r\n                            return done(refuceResult);\r\n                        }\r\n\r\n                    });\r\n            }\r\n        ));\r\n}\r\n\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport default {initialize};\r\n\n\n\n// WEBPACK FOOTER //\n// ./bloglog.auth/index.js","/* -------------- imports -------------- */\r\n// external\r\nimport { Router } from 'express';\r\n\r\n//locals\r\n// import articleRoutes from './articleRoutes.js';\r\n// import tagsRoutes from './tagsRoutes.js';\r\n// import userRoutes from './userRoutes.js';\r\n\r\n// import views to bundle them\r\nimport { } from './views/index.html';\r\n\r\n/* -------------- implementation -------------- */\r\n// create router\r\nconst router = Router();\r\n\r\n//\r\nrouter.use('/', function (req, res) {\r\n    res.render('index.html');\r\n});\r\n\r\n/* -------------- exports -------------- */\r\nexport default router;\r\n\n\n\n// WEBPACK FOOTER //\n// ./bloglog.ui/index.js","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 27\n// module chunks = 0","module.exports = require(\"ejs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ejs\"\n// module id = 28\n// module chunks = 0","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 29\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 30\n// module chunks = 0","// external\r\nimport { Router } from 'express';\r\nimport passport from 'passport';\r\n\r\n// locals\r\nimport { articleService, commentService } from '../bloglog.services';\r\nimport ArticleModel from '../bloglog.models/articleModel.js';\r\nimport CommentModel from '../bloglog.models/commentModel.js';\r\n\r\n// create router\r\nconst router = Router();\r\n\r\n/*\r\n    get recent articles\r\n*/\r\nrouter.get('/', (req, res, next) => {\r\n\r\n  passport.authenticate('local', { failureRedirect: '/#login' });\r\n  articleService.getRecent()\r\n    .then((result) => {\r\n      res.json(result);\r\n    })\r\n    .catch((errorResult) => {\r\n      res.json(errorResult);\r\n    });\r\n\r\n});\r\n\r\nrouter.post('/', (req, res, next) => {\r\n\r\n  articleService.add(\r\n    new ArticleModel(\r\n      null,\r\n      req.body.title,\r\n      req.body.text,\r\n      req.body.tags,\r\n      Date.now(),\r\n      Date.now(),\r\n      req.body.user))\r\n    .then(() => res.sendStatus(200))\r\n    .catch((result) => res.json(result));\r\n\r\n});\r\n\r\nrouter.get('/:id/comments', (req, res, next) => {\r\n\r\n  let article_id = req.params.id;\r\n  commentService.getCommentsByArticleId(article_id)\r\n    .then((result) => res.json(result))\r\n    .catch((errorResult) => res.json(errorResult));\r\n\r\n});\r\n\r\nrouter.post('/:id/comments', (req, res, next) => {\r\n\r\n  let article_id = req.params.id;\r\n  commentService.add(\r\n    new CommentModel(\r\n      null,\r\n      req.body.text,\r\n      req.body.user,\r\n      Date.now(),\r\n      article_id))\r\n    .then(() => res.sendStatus(200))\r\n    .catch((errorResult) => res.json(errorResult));\r\n\r\n});\r\n\r\nexport default router;\n\n\n// WEBPACK FOOTER //\n// ./bloglog.api/articleRoutes.js","// external\r\nimport { Router } from 'express';\r\n\r\n// locals\r\nimport { tagService } from '../bloglog.services';\r\nimport TagModel from '../bloglog.models/tagModel.js';\r\n\r\n// create router\r\nconst router = Router();\r\n\r\n/*\r\n    get all\r\n*/\r\nrouter.get('/', (req, res, next) => {\r\n\r\n  tagService.getTags()\r\n    .then(function (result) {\r\n      res.json(result);\r\n    })\r\n    .catch(function (errorResult) {\r\n      res.json(errorResult);\r\n    });\r\n    \r\n});\r\n\r\nrouter.post('/', (req, res, next) => {\r\n\r\n  tagService.add(\r\n    new TagModel(\r\n      null,\r\n      req.body.value,\r\n      []))\r\n    .then(() => res.sendStatus(200))\r\n    .catch((result) => res.json(result));\r\n\r\n});\r\n\r\nexport default router;\n\n\n// WEBPACK FOOTER //\n// ./bloglog.api/tagsRoutes.js","// external\r\nimport { Router } from 'express';\r\n\r\n// locals\r\nimport { userService } from '../bloglog.services';\r\nimport UserModel from '../bloglog.models/userModel.js';\r\n\r\n// create router\r\nconst router = Router();\r\n\r\n/*\r\n *  get user by id\r\n */\r\nrouter.get('/:id', (req, res, next) => {\r\n  res.end(\"not yet implemented\");\r\n  // tagService.getTags()\r\n  //   .then(function (result) {\r\n  //     res.json(result);\r\n  //   })\r\n  //   .catch(function (errorResult) {\r\n  //     res.json(errorResult);\r\n  //   });\r\n    \r\n});\r\n\r\n/*\r\n *  add user\r\n */\r\nrouter.post('/', (req, res, next) => {\r\n\r\n  userService.add(\r\n    new UserModel(\r\n      null,\r\n      req.body.name,\r\n      req.body.email,\r\n      req.body.password))\r\n    .then(() => res.sendStatus(200))\r\n    .catch((result) => res.json(result));\r\n\r\n});\r\n\r\nexport default router;\n\n\n// WEBPACK FOOTER //\n// ./bloglog.api/userRoutes.js","'use strict';\r\n// external\r\nimport mongoose from 'mongoose';\r\n\r\n//locals\r\n// import articleRoutes from './articleRoutes.js';\r\n\r\n/* -------------- implementation -------------- */\r\nvar articleSchema = new mongoose.Schema({\r\n    'title': {\r\n        type: String,\r\n        required: true\r\n    },\r\n    'text': {\r\n        type: String,\r\n        required: true,\r\n    },\r\n    'tags': {\r\n        type: String,\r\n        default: []\r\n    },\r\n    'createDateTime': {\r\n        type: Date,\r\n        default: Date.now()\r\n    },\r\n    'updateDateTime': {\r\n        type: Date,\r\n        default: Date.now()\r\n    },\r\n    'user': {\r\n        'user_id': {\r\n            type: mongoose.Schema.Types.ObjectId,\r\n            required: true,\r\n        },\r\n        'name': {\r\n            type: String,\r\n            required: true\r\n        }\r\n    }\r\n});\r\n\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport default mongoose.model('articles', articleSchema);\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseModels/articleDataModel.js","'use strict';\r\n// external\r\nimport mongoose from 'mongoose';\r\n\r\n//locals\r\n// import articleRoutes from './articleRoutes.js';\r\n\r\n/* -------------- implementation -------------- */\r\nvar commentSchema = new mongoose.Schema({\r\n    'article_id': {\r\n        type: mongoose.Schema.Types.ObjectId,\r\n        required: true\r\n    },\r\n    'text': {\r\n        type: String,\r\n        required: true,\r\n    },\r\n    'createDateTime': {\r\n        type: Date,\r\n        default: Date.now()\r\n    },\r\n    'user': {\r\n        'user_id': {\r\n            type: mongoose.Schema.Types.ObjectId,\r\n            required: true,\r\n        },\r\n        'name': {\r\n            type: String,\r\n            required: true\r\n        }\r\n    }\r\n});\r\n\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport default mongoose.model('comments', commentSchema);\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseModels/commentDataModel.js","'use strict';\r\n// external\r\nimport mongoose from 'mongoose';\r\n\r\n//locals\r\n\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nvar tagSchema = new mongoose.Schema({\r\n\t'value': {\r\n\t\ttype: String,\r\n\t\trequired: true,\r\n\t\tunique: true\r\n\t},\r\n\t'articles': {\r\n\t\ttype: Array\r\n\t}\r\n});\r\n\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport default mongoose.model('tags', tagSchema);\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseModels/tagDataModel.js","'use strict';\r\n// external\r\nimport mongoose from 'mongoose';\r\n\r\n//locals\r\n\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nvar userSchema = new mongoose.Schema({\r\n\t'name': {\r\n\t\ttype: String,\r\n\t\trequired: true,\r\n\t\tunique: true\r\n\t},\r\n\t'email': {\r\n\t\ttype: String,\r\n\t\trequired: true,\r\n\t\tunique: true\r\n\t},\r\n\t'password': {\r\n\t\ttype: String,\r\n\t\trequired: true\r\n\t}\r\n});\r\n\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport default mongoose.model('users', userSchema);\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseModels/userDataModel.js","'use strict';\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\nimport articleDataModel from '../mongooseModels/articleDataModel.js';\r\nimport ArticleModel from '../../bloglog.models/articleModel.js';\r\nimport Result from '../../bloglog.common/result.js';\r\nimport PageResult from '../../bloglog.common/pageResult.js';\r\nimport ResultCodes from '../../bloglog.common/resultCodes.js';\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class ArticleRepository {\r\n    constructor() {\r\n    }\r\n\r\n    /*\r\n     * gets articles\r\n     */\r\n    get(skip, count) {\r\n\r\n        return new Promise(function (resolve, reject) {\r\n            articleDataModel\r\n                .find({})\r\n                .sort('-createDateTime')\r\n                .skip(skip)\r\n                .limit(count)\r\n                .exec(function (err, articles) {\r\n                    if (err) {\r\n                        reject(new Result(null, false, err, ResultCodes.Error()));\r\n                    }\r\n                    else if (!articles) {\r\n                        reject(new Result(null, false, err, ResultCodes.ObjectNotFound()));\r\n                    }\r\n                    else {\r\n                        let articleModels = [];\r\n                        for (let article of articles) {\r\n                            articleModels.push(MapToArticleModel(article));\r\n                        }\r\n\r\n                        articleDataModel.count(function (err, count) {\r\n                            if (err) {\r\n                                reject(new Result(null, false, err, ResultCodes.Error()));\r\n                            }\r\n\r\n                            resolve(new Result(new PageResult(articleModels, count), true, \"\", ResultCodes.Success()));\r\n                        });\r\n                    }\r\n                });\r\n        });\r\n    };\r\n\r\n    getById(id) {\r\n\r\n        return new Promise(function (resolve, reject) {\r\n            articleDataModel\r\n                .findOne({ '_id': id })\r\n                .exec(function (err, article) {\r\n                    if (err) {\r\n                        reject(new Result(null, false, err, ResultCodes.Error()));\r\n                    }\r\n                    else if (!article) {\r\n                        reject(new Result(null, false, err, ResultCodes.ObjectNotFound()));\r\n                    }\r\n                    else {\r\n                        resolve(new Result(MapToArticleModel(article), true, \"\", ResultCodes.Success()));\r\n                    }\r\n                });\r\n        });\r\n\r\n    }\r\n\r\n    /*\r\n     * adds article\r\n     */\r\n    add(article) {\r\n        return articleDataModel.create(article);\r\n    };\r\n};\r\n\r\n\r\nfunction MapToArticleModel(articleDataModel) {\r\n    return new ArticleModel(\r\n        articleDataModel._id,\r\n        articleDataModel.title,\r\n        articleDataModel.text,\r\n        articleDataModel.tags,\r\n        articleDataModel.createDateTime,\r\n        articleDataModel.updateDateTime,\r\n        articleDataModel.user);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseRepositories/articleRepository.js","'use strict';\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\nimport commentDataModel from '../mongooseModels/commentDataModel.js';\r\nimport CommentModel from '../../bloglog.models/commentModel.js';\r\nimport Result from '../../bloglog.common/result.js';\r\nimport PageResult from '../../bloglog.common/pageResult.js';\r\nimport ResultCodes from '../../bloglog.common/resultCodes.js';\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class CommentRepository {\r\n  constructor() {\r\n  }\r\n\r\n  /*\r\n   * gets comments of the given article\r\n   */\r\n  getByArticleId(article_id) {\r\n      return new Promise(function (resolve, reject) {\r\n          commentDataModel\r\n              .find({ 'article_id': article_id })\r\n              .sort('-createDateTime')\r\n              .exec(function (err, comments) {\r\n                  if (err) {\r\n                      reject(new Result(null, false, err, ResultCodes.Error()));\r\n                  }\r\n                  else if (!comments) {\r\n                      reject(new Result(null, false, err, ResultCodes.ObjectNotFound()));\r\n                  }\r\n                  else {\r\n                      let commentModels = [];\r\n                      for (let comment of comments) {\r\n                          commentModels.push(MapToCommentModel(comment));\r\n                      }\r\n                      resolve(new Result(commentModels, true, \"\", ResultCodes.Success()));\r\n                  }\r\n              });\r\n      });\r\n  };\r\n\r\n  /*\r\n   * adds comment\r\n   */\r\n  add(comment) {\r\n    return commentDataModel.create(comment);\r\n  };\r\n};\r\n\r\nfunction MapToCommentModel(commentDataModel) {\r\n    return new CommentModel(\r\n        commentDataModel._id,\r\n        commentDataModel.text,\r\n        commentDataModel.user,\r\n        commentDataModel.createDateTime,\r\n        commentDataModel.article_id);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseRepositories/commentRepository.js","'use strict';\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\nimport tagDataModel from '../mongooseModels/tagDataModel.js';\r\nimport TagModel from '../../bloglog.models/tagModel.js';\r\nimport Result from '../../bloglog.common/result.js';\r\nimport ResultCodes from '../../bloglog.common/resultCodes.js';\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class TagRepository {\r\n  constructor() {\r\n  }\r\n\r\n  /*\r\n   * gets tags\r\n   */\r\n  get() {\r\n\r\n      return new Promise(function (resolve, reject) {\r\n          tagDataModel\r\n              .find({})\r\n              .exec(function (err, tags) {\r\n                  if (err) {\r\n                      reject(new Result(null, false, err, ResultCodes.Error()));\r\n                  }\r\n                  else if (!tags) {\r\n                      reject(new Result(null, false, err, ResultCodes.ObjectNotFound()));\r\n                  }\r\n                  else {\r\n                      let tagModels = [];\r\n                      for (let tag of tags) {\r\n                          tagModels.push(MapToTagModel(tag));\r\n                      }\r\n\r\n                      resolve(new Result(tagModels, true, \"\", ResultCodes.Success()));\r\n                  }\r\n              });\r\n      });\r\n  };\r\n\r\n  /*\r\n   * adds tag\r\n   */\r\n  add(tag) {\r\n    return tagDataModel.create(tag);\r\n  };\r\n};\r\n\r\n\r\nfunction MapToTagModel(tagDataModel) {\r\n    return new TagModel(\r\n        tagDataModel._id,\r\n        tagDataModel.value,\r\n        tagDataModel.articles_ids);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseRepositories/tagRepository.js","'use strict';\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\nimport userDataModel from '../mongooseModels/userDataModel.js';\r\nimport UserModel from '../../bloglog.models/userModel.js';\r\nimport Result from '../../bloglog.common/result.js';\r\nimport ResultCodes from '../../bloglog.common/resultCodes.js';\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class UserRepository {\r\n  constructor() {\r\n  }\r\n\r\n  /*\r\n   * gets user\r\n   */\r\n  get(email) {\r\n\r\n    return new Promise(function (resolve, reject) {\r\n      userDataModel\r\n        .findOne({ \"email\": email })\r\n        .exec(function (err, user) {\r\n          if (err) {\r\n            reject(new Result(null, false, err, ResultCodes.Error()));\r\n          }\r\n          else if (!user) {\r\n            reject(new Result(null, false, err, ResultCodes.ObjectNotFound()));\r\n          }\r\n          else {\r\n            resolve(new Result(MapToUserModel(user), true, \"\", ResultCodes.Success()));\r\n          }\r\n        });\r\n    });\r\n\r\n  };\r\n\r\n  /*\r\n   * adds tag\r\n   */\r\n  add(user) {\r\n    return userDataModel.create(user);\r\n  };\r\n};\r\n\r\nfunction MapToUserModel(user) {\r\n  return new UserModel(\r\n    user._id,\r\n    user.name,\r\n    user.email,\r\n    \"\"\r\n  );\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseRepositories/userRepository.js","/* -------------- imports -------------- */\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\nimport Article from '../bloglog.models/articleModel.js';\r\nimport { articleRepository } from '../bloglog.repositories';\r\nimport Result from '../bloglog.common/result.js';\r\nimport ResultCodes from '../bloglog.common/resultCodes.js';\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class ArticleService {\r\n  constructor() {\r\n  }\r\n\r\n  /*\r\n   * gets recent articles\r\n   */\r\n  getRecent() {\r\n    return articleRepository.get(0, 10);\r\n  };\r\n\r\n  /*\r\n   * adds article\r\n   */\r\n  add(articleModel) {\r\n    if(checkArticle(articleModel)){\r\n        return new articleRepository.add(articleModel);\r\n    }\r\n\r\n    return Promise.reject(new Result(null, false, \"\", ResultCodes.InvalidObject()));\r\n  };\r\n};\r\n\r\nfunction checkArticle(article) {\r\n  if (!article.title\r\n    || article.title.length === 0\r\n    || article.title.length > 500) {\r\n    return false;\r\n  }\r\n\r\n  if (!article.text\r\n    || article.text.length === 0\r\n    || article.text.length > 20000) {\r\n    return false;\r\n  }\r\n\r\n  if (!article.user\r\n    || !article.user.user_id\r\n    || !article.user.name\r\n  ) {\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.services/articleService.js","/* -------------- imports -------------- */\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\nimport Comment from '../bloglog.models/commentModel.js';\r\nimport { commentRepository, articleRepository } from '../bloglog.repositories';\r\nimport Result from '../bloglog.common/result.js';\r\nimport ResultCodes from '../bloglog.common/resultCodes.js';\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class TagService {\r\n  constructor() {\r\n  }\r\n\r\n  /*\r\n   * gets tags\r\n   */\r\n  getCommentsByArticleId(article_id) {\r\n    return commentRepository.getByArticleId(article_id);\r\n  };\r\n\r\n  /*\r\n   * adds comment to article\r\n   */\r\n  add(commentModel) {\r\n\r\n    return new Promise(function (resolve, reject) {\r\n      articleRepository.getById(commentModel.article_id)\r\n        .then(function (result) {\r\n          if (result.success) {\r\n            if (checkComment(commentModel)) {\r\n              return resolve(new commentRepository.add(commentModel));\r\n            }\r\n\r\n            return reject(new Result(null, false, \"Comment has invalid field\", ResultCodes.InvalidObject()));\r\n          }\r\n          else{\r\n            reject(result);\r\n          }\r\n        })\r\n        .catch(function (errorResult) {\r\n          reject(new Result(null, false, errorResult.message, errorResult.code));\r\n        });\r\n    });\r\n\r\n  }\r\n}\r\n\r\n\r\n// inner functions\r\nfunction checkComment(comment) {\r\n  if (!comment.text\r\n    || comment.text.length === 0\r\n    || comment.text.length > 5000) {\r\n    return false;\r\n  }\r\n\r\n  if (!comment.user\r\n    || !comment.user.user_id\r\n    || !comment.user.name\r\n  ) {\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.services/commentService.js","/* -------------- imports -------------- */\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\nimport Tag from '../bloglog.models/tagModel.js';\r\nimport { tagRepository } from '../bloglog.repositories';\r\nimport Result from '../bloglog.common/result.js';\r\nimport ResultCodes from '../bloglog.common/resultCodes.js';\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class TagService {\r\n  constructor() {\r\n  }\r\n\r\n  /*\r\n   * gets tags\r\n   */\r\n  getTags() {\r\n    return tagRepository.get();\r\n  };\r\n\r\n  /*\r\n   * adds tag\r\n   */\r\n  add(tagModel) {\r\n    if(checkTag(tagModel)){\r\n        return new tagRepository.add(tagModel);\r\n    }\r\n\r\n    return Promise.reject(new Result(null, false, \"\", ResultCodes.InvalidObject()));\r\n  };\r\n};\r\n\r\n\r\nfunction checkTag(tag){\r\n    if(!tag.value\r\n      || tag.value.length === 0\r\n      || tag.value.length > 50){\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./bloglog.services/tagService.js","/* -------------- imports -------------- */\r\n// external\r\nimport { Md5 } from 'ts-md5/dist/md5';\r\n\r\n//locals\r\nimport User from '../bloglog.models/userModel.js';\r\nimport { userRepository } from '../bloglog.repositories';\r\nimport Result from '../bloglog.common/result.js';\r\nimport ResultCodes from '../bloglog.common/resultCodes.js';\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class UserService {\r\n  constructor() {\r\n  }\r\n\r\n  /*\r\n   * gets user\r\n   */\r\n  get(email) {\r\n\r\n    return userRepository.get(email);\r\n    \r\n  };\r\n\r\n  /*\r\n   * adds user\r\n   */\r\n  add(userModel) {\r\n\r\n    if (checkUser(userModel)) {\r\n      // we must not keep password as it is - so we hash it.\r\n      userModel.password = Md5.hashStr(userModel.password);\r\n      return new userRepository.add(userModel);\r\n    }\r\n\r\n    return Promise.reject(new Result(null, false, \"\", ResultCodes.InvalidObject()));\r\n\r\n  };\r\n};\r\n\r\nfunction checkUser(user) {\r\n  if (!user.email\r\n    || user.email.length === 0\r\n    || user.email.length > 50) {\r\n    return false;\r\n  }\r\n\r\n  if (!user.name\r\n    || user.name.length === 0\r\n    || user.name.length > 50) {\r\n    return false;\r\n  }\r\n\r\n  if (!user.password\r\n    || user.password.length === 0\r\n    || user.password.length > 50) {\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.services/userService.js","module.exports = __webpack_public_path__ + \"./views/index.html\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./bloglog.ui/views/index.html\n// module id = 46\n// module chunks = 0","module.exports = require(\"passport-local\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport-local\"\n// module id = 47\n// module chunks = 0","module.exports = require(\"ts-md5/dist/md5\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ts-md5/dist/md5\"\n// module id = 48\n// module chunks = 0","'use strict';\r\n\r\n// internal\r\nimport path from 'path';\r\n\r\n// external\r\nimport express from 'express';\r\nimport http from 'http';\r\nimport bodyParser from 'body-parser';\r\n\r\n// locals\r\nimport config from '../config.json';\r\nimport apiRoutes from './bloglog.api';\r\nimport uiRoutes from './bloglog.ui';\r\nimport auth from './bloglog.auth';\r\n\r\n// create app\r\nconst app = express();\r\napp.server = http.createServer(app);\r\n\r\n// parsing application/json body\r\napp.use(bodyParser.json());\r\n\r\n// make static files server\r\napp.use(express.static('dist'));\r\napp.use(express.static('./node_modules'));\r\n\r\n// configure views\r\napp.set('view engine', 'html');\r\napp.engine('html', require('ejs').renderFile);\r\napp.set('views', path.join(__dirname, '/views'));\r\n\r\n// init auth\r\nauth.initialize(app);\r\n\r\n// set routes\r\napp.use('/api', apiRoutes);\r\napp.use('/', uiRoutes);\r\n\r\n// start server.\r\napp.server.listen(process.env.PORT || config.port);\n\n\n// WEBPACK FOOTER //\n// ./index.js"],"sourceRoot":""}