{"version":3,"sources":["webpack:///webpack/bootstrap a50ddf82fd1649414452","webpack:///external \"react\"","webpack:///./bloglog.common/result.js","webpack:///./bloglog.common/resultCodes.js","webpack:///external \"material-ui/RaisedButton\"","webpack:///external \"express\"","webpack:///./bloglog.ui.react/views/theme.js","webpack:///external \"material-ui/styles/MuiThemeProvider\"","webpack:///./bloglog.services/index.js","webpack:///external \"material-ui/TextField\"","webpack:///external \"mongoose\"","webpack:///./bloglog.repositories/index.js","webpack:///./bloglog.models/articleModel.js","webpack:///./bloglog.models/commentModel.js","webpack:///./bloglog.models/tagModel.js","webpack:///./bloglog.models/userModel.js","webpack:///external \"passport\"","webpack:///external \"react-cookie\"","webpack:///./bloglog.common/pageResult.js","webpack:///./bloglog.ui.react/services/auth.service.js","webpack:///external \"material-ui/Chip\"","webpack:///external \"material-ui/List\"","webpack:///external \"ts-md5/dist/md5\"","webpack:///../config.json","webpack:///./bloglog.api/index.js","webpack:///./bloglog.auth/index.js","webpack:///./bloglog.ui.react/index.js","webpack:///./bloglog.ui/index.js","webpack:///external \"body-parser\"","webpack:///external \"cookie-parser\"","webpack:///external \"ejs\"","webpack:///external \"http\"","webpack:///external \"path\"","webpack:///./bloglog.api/articleRoutes.js","webpack:///./bloglog.api/tagsRoutes.js","webpack:///./bloglog.repositories/mongooseModels/articleDataModel.js","webpack:///./bloglog.repositories/mongooseModels/commentDataModel.js","webpack:///./bloglog.repositories/mongooseModels/tagDataModel.js","webpack:///./bloglog.repositories/mongooseModels/userDataModel.js","webpack:///./bloglog.repositories/mongooseRepositories/articleRepository.js","webpack:///./bloglog.repositories/mongooseRepositories/commentRepository.js","webpack:///./bloglog.repositories/mongooseRepositories/tagRepository.js","webpack:///./bloglog.repositories/mongooseRepositories/userRepository.js","webpack:///./bloglog.services/articleService.js","webpack:///./bloglog.services/commentService.js","webpack:///./bloglog.services/tagService.js","webpack:///./bloglog.services/userService.js","webpack:///./bloglog.ui.react/components/articleDetail.js","webpack:///./bloglog.ui.react/components/articlesList.js","webpack:///./bloglog.ui.react/components/comments.js","webpack:///./bloglog.ui.react/components/editArticle.js","webpack:///./bloglog.ui.react/components/login.js","webpack:///./bloglog.ui.react/components/newArticle.js","webpack:///./bloglog.ui.react/components/newComment.js","webpack:///./bloglog.ui.react/components/signup.js","webpack:///./bloglog.ui.react/views/articleDetailsPage.js","webpack:///./bloglog.ui.react/views/articlesPage.js","webpack:///./bloglog.ui.react/views/editArticlePage.js","webpack:///./bloglog.ui.react/views/main.js","webpack:///./bloglog.ui.react/views/newArticlePage.js","webpack:///./bloglog.ui.react/views/signupPage.js","webpack:///./bloglog.ui.react/views/template.js","webpack:///./bloglog.ui/views/index.html","webpack:///external \"jwt-simple\"","webpack:///external \"material-ui/styles/colors\"","webpack:///external \"material-ui/styles/getMuiTheme\"","webpack:///external \"passport-jwt\"","webpack:///external \"react-dom\"","webpack:///external \"react-dom/server\"","webpack:///external \"react-tap-event-plugin\"","webpack:///./index.js"],"names":["Result","data","success","message","code","ResultCodes","muiTheme","palette","primary1Color","avatar","borderColor","userAgent","articleService","tagService","userService","commentService","connect","Promise","global","connection","articleRepository","tagRepository","userRepository","commentRepository","ArticleModel","id","title","text","description","tags","createDateTime","updateDateTime","user","CommentModel","article_id","TagModel","value","article_ids","UserModel","name","email","password","PageResult","count","logOut","remove","window","location","href","router","use","initialize","app","opts","secretOrKey","jwtFromRequest","fromAuthHeader","jwt_payload","done","get","then","result","catch","error","cookieOpts","req","token","cookies","substring","post","res","body","json","ObjectExists","refuceResult","ObjectNotFound","add","Success","InvalidObject","Error","checkPassword","encode","Unathorized","html","renderToString","Id","undefined","send","scriptDest","authenticate","session","failureRedirect","params","getById","dataContext","article","errorResult","test","pageNumber","Number","pageSize","next","isAuth","getCommentsByArticleId","resultComments","comments","user_id","articles","render","getRecent","Date","now","filterData","InvalidArguments","put","update","delete","getTagsByText","query","articleSchema","Schema","type","String","required","Array","default","Types","ObjectId","model","commentSchema","tagSchema","unique","userSchema","ArticleRepository","skip","resolve","reject","find","sort","limit","exec","err","articleModels","push","MapToArticleModel","queryFilter","$all","findOne","articleModel","create","articleCreatedDataModel","findByIdAndUpdate","new","updatedArticleDataModel","findByIdAndRemove","deletedArticleDataModel","articleDataModel","_id","CommentRepository","commentModels","comment","MapToCommentModel","commentModel","commentCreatedDataModel","commentDataModel","TagRepository","values","$in","tagModels","tag","MapToTagModel","tagIds","articleId","tagValues","updates","tagValue","q","u","$set","$addToSet","upsert","db","command","ordered","writeConcern","w","wtimeout","commandResult","upserted","writeErrors","errmsg","writeConcernError","tagDataModel","articles_ids","UserRepository","MapToUserModel","ArticleService","getByTagValue","checkArticle","createOrUpdateByArticleId","addArticleResult","addArticleErrorResult","articleFromStorage","equals","deleteForArticleId","length","CommentService","getByArticleId","checkComment","TagService","getContainsText","isArray","getArticleIdsByTagIds","tagModel","checkTag","UserService","userModel","checkUser","hashStr","ArticleDetail","props","Component","ArticlesList","map","i","selectArticle","bind","Comments","EditArticle","state","errors","styles","chip","margin","wrapper","display","flexWrap","edit","onChangeTitle","onChangeText","onChangeDescription","event","target","setState","preventDefault","xhr","XMLHttpRequest","open","setRequestHeader","responseType","addEventListener","readyState","DONE","status","console","log","response","alert","JSON","stringify","Auth","login","onChangeMail","onChangePassword","save","NewArticle","handleRequestDelete","key","chipData","chipToDelete","indexOf","splice","forEach","renderChip","NewComment","SignUp","signup","onChangeName","ArticleDetailsPage","myArticle","ArticlesPage","EditArticlePage","Main","NewArticlePage","SignUpPage","server","createServer","static","set","engine","require","renderFile","join","__dirname","process","env","NODE_ENV","listen","PORT","port"],"mappings":"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","file":"index.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 95);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a50ddf82fd1649414452","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 0\n// module chunks = 0","'use strict';\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\n// import articleRoutes from './articleRoutes.js';\r\n\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class Result{\r\n    constructor(data, success, message, code){\r\n      this.data = data;\r\n      this.success = success;\r\n      this.message = message;\r\n      this.code = code;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.common/result.js","'use strict';\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\n// import articleRoutes from './articleRoutes.js';\r\n\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class ResultCodes{\r\n    static Error() { return -1;}\r\n    static Success() { return 0;}\r\n\r\n    \r\n    static InvalidObject() { return 1;}\r\n    static ObjectNotFound() { return 2;}\r\n    static ObjectExists() { return 3;}\r\n    static Unathorized() { return 4;}\r\n    static InvalidArguments() { return 5;}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.common/resultCodes.js","module.exports = require(\"material-ui/RaisedButton\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"material-ui/RaisedButton\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 4\n// module chunks = 0","import getMuiTheme from 'material-ui/styles/getMuiTheme';\r\nimport { cyan400 } from 'material-ui/styles/colors';\r\n\r\nexport const muiTheme = getMuiTheme(\r\n    {\r\n        palette: {\r\n            primary1Color: cyan400\r\n        },\r\n    }, {\r\n        avatar: {\r\n            borderColor: null,\r\n        },\r\n        userAgent: 'all'\r\n    });\n\n\n// WEBPACK FOOTER //\n// ./bloglog.ui.react/views/theme.js","module.exports = require(\"material-ui/styles/MuiThemeProvider\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"material-ui/styles/MuiThemeProvider\"\n// module id = 6\n// module chunks = 0","'use strict';\r\n\r\n/* -------------- imports -------------- */\r\n// external\r\n\r\n//locals\r\nimport ArticleService from './articleService.js';\r\nimport TagService from './tagService.js';\r\nimport UserService from './userService.js';\r\nimport CommentService from './commentService.js';\r\n\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nconst articleService = new ArticleService();\r\nconst tagService = new TagService();\r\nconst userService = new UserService();\r\nconst commentService = new CommentService();\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport {\r\n    articleService,\r\n    tagService,\r\n    userService,\r\n    commentService\r\n};\n\n\n// WEBPACK FOOTER //\n// ./bloglog.services/index.js","module.exports = require(\"material-ui/TextField\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"material-ui/TextField\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 9\n// module chunks = 0","'use strict';\r\n\r\n/* -------------- imports -------------- */\r\n// external\r\nimport mongoose from 'mongoose';\r\n\r\n//locals\r\nimport ArticleRepository from './mongooseRepositories/articleRepository.js';\r\nimport TagRepository from './mongooseRepositories/tagRepository.js';\r\nimport UserRepository from './mongooseRepositories/userRepository.js';\r\nimport CommentRepository from './mongooseRepositories/commentRepository.js';\r\n\r\n/* -------------- implementation -------------- */\r\nvar connect = function connect() {\r\n  mongoose.Promise = global.Promise;\r\n  \r\n  // TODO: move to config file\r\n  mongoose.connect(\"mongodb://zlov:0429935@ds019488.mlab.com:19488/heroku_n0v8cmmh\");\r\n  return mongoose.connection;\r\n};\r\nconnect();\r\n\r\n// create repositories\r\nconst articleRepository = new ArticleRepository();\r\nconst tagRepository = new TagRepository();\r\nconst userRepository = new UserRepository();\r\nconst commentRepository = new CommentRepository();\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport {\r\n  articleRepository,\r\n  tagRepository,\r\n  userRepository,\r\n  commentRepository\r\n};\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/index.js","/* -------------- imports -------------- */\r\n// external\r\n\r\n//locals\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class ArticleModel{\r\n    constructor(id, title, text, description, tags, createDateTime, updateDateTime, user){\r\n      this.id = id;\r\n      this.title = title;\r\n      this.text = text;\r\n      this.description = description;\r\n      this.tags = tags;\r\n      this.createDateTime = createDateTime;\r\n      this.updateDateTime = updateDateTime;\r\n      this.user = user;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.models/articleModel.js","/* -------------- imports -------------- */\r\n// external\r\n\r\n//locals\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class CommentModel{\r\n    constructor(id, text, user, createDateTime, article_id){\r\n      this.id = id;\r\n      this.text = text;\r\n      this.user = user;\r\n      this.createDateTime = createDateTime;\r\n      this.article_id = article_id;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.models/commentModel.js","/* -------------- imports -------------- */\r\n// external\r\n\r\n//locals\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class TagModel{\r\n    constructor(id, value, article_ids){\r\n      this.id = id;\r\n      this.value = value;\r\n      this.article_ids = article_ids;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.models/tagModel.js","/* -------------- imports -------------- */\r\n// external\r\n\r\n//locals\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class UserModel{\r\n    constructor(id, name, email, password){\r\n      this.id = id;\r\n      this.name = name;\r\n      this.email = email;\r\n      this.password = password;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.models/userModel.js","module.exports = require(\"passport\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"react-cookie\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-cookie\"\n// module id = 16\n// module chunks = 0","'use strict';\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\n// import articleRoutes from './articleRoutes.js';\r\n\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class PageResult{\r\n    constructor(data, count){\r\n      this.data = data;\r\n      this.count = count;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.common/pageResult.js","\r\nimport cookie from 'react-cookie';\r\n\r\nexport function logOut() {\r\n\tcookie.remove(\"Id\");\r\n\tcookie.remove(\"Token.JWT\");\r\n\twindow.location.href = window.location.href;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.ui.react/services/auth.service.js","module.exports = require(\"material-ui/Chip\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"material-ui/Chip\"\n// module id = 19\n// module chunks = 0","module.exports = require(\"material-ui/List\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"material-ui/List\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"ts-md5/dist/md5\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ts-md5/dist/md5\"\n// module id = 21\n// module chunks = 0","module.exports = {\n\t\"port\": 8080,\n\t\"bodyLimit\": \"100kb\",\n\t\"corsHeaders\": [\n\t\t\"Link\"\n\t]\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../config.json\n// module id = 22\n// module chunks = 0","/* -------------- imports -------------- */\r\n// external\r\nimport { Router } from 'express';\r\n\r\n//locals\r\nimport articleRoutes from './articleRoutes.js';\r\nimport tagsRoutes from './tagsRoutes.js';\r\n\r\n/* -------------- implementation -------------- */\r\n// create router\r\nconst router = Router();\r\n\r\n// add article routes\r\nrouter.use('/articles', articleRoutes);\r\n\r\n// add tag routes\r\nrouter.use('/tags', tagsRoutes);\r\n\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport default router;\n\n\n// WEBPACK FOOTER //\n// ./bloglog.api/index.js","'use strict';\r\n// external\r\nimport passport from 'passport';\r\nimport { ExtractJwt, Strategy as JwtStrategy } from 'passport-jwt';\r\nimport JWT from 'jwt-simple';\r\nimport { Md5 } from 'ts-md5/dist/md5';\r\n\r\n//locals\r\nimport { userService } from '../bloglog.services';\r\nimport UserModel from '../bloglog.models/userModel.js';\r\nimport ResultCodes from '../bloglog.common/resultCodes.js';\r\nimport Result from '../bloglog.common/result.js';\r\n\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nfunction initialize(app) {\r\n    app.use(passport.initialize());\r\n\r\n    let opts = {};\r\n    opts.secretOrKey = \"zlovzlovzlolovlll\";\r\n    opts.jwtFromRequest = ExtractJwt.fromAuthHeader();\r\n    passport.use(new JwtStrategy(opts, function (jwt_payload, done) {\r\n\r\n        userService.get(jwt_payload.email)\r\n            .then(result => {\r\n                if (result.success) {\r\n                    let user = result.data;\r\n                    if (user) {\r\n                        user.password = \"\";\r\n                        return done(null, user);\r\n                    }\r\n\r\n                    return done(null, false, { message: 'invalid credentials' });\r\n                }\r\n\r\n                return done(null, false, { message: 'invalid credentials' });\r\n            })\r\n            .catch(error => {\r\n                return done(error);\r\n            });\r\n\r\n    }));\r\n\r\n    let cookieOpts = {};\r\n    cookieOpts.secretOrKey = \"zlovzlovzlolovlll\";\r\n    cookieOpts.jwtFromRequest = function (req) {\r\n        let token = null;\r\n        if (req && req.cookies) {\r\n            token = req.cookies['Token.JWT'];\r\n            if(token){\r\n                token = token.substring(4);\r\n            }\r\n        }\r\n        return token;\r\n    };\r\n    passport.use(\"jwt-cookie\", new JwtStrategy(cookieOpts, function (jwt_payload, done) {\r\n        \r\n        userService.get(jwt_payload.email)\r\n            .then(result => {\r\n                if (result.success) {\r\n                    let user = result.data;\r\n                    if (user) {\r\n                        user.password = \"\";\r\n                        return done(null, user);\r\n                    }\r\n\r\n                    return done(null, false, { message: 'invalid credentials' });\r\n                }\r\n\r\n                return done(null, false, { message: 'invalid credentials' });\r\n            })\r\n            .catch(error => {\r\n                return done(error);\r\n            });\r\n\r\n    }));\r\n\r\n    app.post('/signup', function (req, res) {\r\n\r\n        userService.get(req.body.email)\r\n            .then(result => {\r\n\r\n                if (result.success) {\r\n                    return res.json(new Result(null, false, \"user exists\", ResultCodes.ObjectExists()));\r\n                }\r\n\r\n            })\r\n            .catch(refuceResult => {\r\n                // the user should not exist, so we should get refuce from service.\r\n\r\n                if (refuceResult.code === ResultCodes.ObjectNotFound()) {\r\n                    userService.add(\r\n                        new UserModel(\r\n                            null,\r\n                            req.body.name,\r\n                            req.body.email,\r\n                            req.body.password\r\n                        ))\r\n                        .then(result => {\r\n                            return res.json(new Result(null, true, \"user was successfuly created\", ResultCodes.Success()));\r\n                        })\r\n                        .catch(result => {\r\n                            return res.json(new Result(null, false, \"invalid credentials\", ResultCodes.InvalidObject()));\r\n                        });\r\n                } else {\r\n                    return res.json(new Result(refuceResult, false, \"invalid credentials\", ResultCodes.Error()));\r\n                }\r\n\r\n            });\r\n\r\n    });\r\n\r\n    app.post('/login', function (req, res) {\r\n\r\n        userService.get(req.body.email)\r\n            .then(result => {\r\n                if (result.success) {\r\n                    let user = result.data;\r\n                    if (userService.checkPassword(user, req.body.password)) {\r\n                        var token = JWT.encode(user, opts.secretOrKey);\r\n                        \r\n                        return res.json(\r\n                            new Result(\r\n                                { \r\n                                    id: user.id,\r\n                                    token: 'JWT ' + token\r\n                                },\r\n                                true,\r\n                                \"success\",\r\n                                ResultCodes.Success()));\r\n                    }\r\n\r\n                    return res.json(new Result(null, false, \"invalid creadentials\", ResultCodes.Unathorized()));\r\n                }\r\n\r\n                return res.json(new Result(null, false, \"invalid creadentials\", ResultCodes.Unathorized()));\r\n            })\r\n            .catch(error => {\r\n                return res.json(new Result(error, false, \"invalid creadentials\", ResultCodes.Unathorized()));\r\n            });\r\n\r\n    });\r\n}\r\n\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport default { initialize };\r\n\n\n\n// WEBPACK FOOTER //\n// ./bloglog.auth/index.js","/* -------------- imports -------------- */\r\n// external\r\nimport { Router } from 'express';\r\nimport passport from 'passport';\r\n\r\nimport React from 'react';\r\nimport ReactDom from 'react-dom';\r\nimport ReactDOMServer from 'react-dom/server';\r\n\r\n// local\r\nimport template from './views/template.js';\r\nimport Main from './views/main.js';\r\nimport SignUpPage from './views/signupPage.js';\r\nimport ArticlesPage from './views/articlesPage.js';\r\nimport ArticleDetailsPage from './views/articleDetailsPage';\r\nimport NewArticlePage from './views/newArticlePage';\r\nimport EditArticlePage from './views/editArticlePage';\r\n\r\n// results\r\nimport Result from '../bloglog.common/result.js';\r\nimport ResultCodes from '../bloglog.common/resultCodes.js';\r\n\r\n// local services\r\nimport { articleService, commentService } from '../bloglog.services';\r\n/* -------------- implementation -------------- */\r\n\r\n// create router\r\nconst router = Router();\r\nimport injectTapEventPlugin from 'react-tap-event-plugin';\r\ninjectTapEventPlugin();\r\n\r\n// main page\r\nrouter.get('/', function (req, res) {\r\n    \r\n    let html = ReactDOMServer.renderToString(<Main isAuth={req.cookies.Id !== undefined}/>);\r\n    res.send(template(\r\n        {\r\n            body: html,\r\n            title: 'Blog Log',\r\n            scriptDest: 'react/main.bundle.js'\r\n        }));\r\n\r\n});\r\n\r\n// singup\r\nrouter.get('/signup', function (req, res) {\r\n\r\n    let html = ReactDOMServer.renderToString(<SignUpPage />);\r\n    res.send(template(\r\n        {\r\n            body: html,\r\n            title: 'Blog Log',\r\n            scriptDest: 'react/signup.bundle.js'\r\n        }));\r\n\r\n});\r\n\r\n// edit article page\r\nrouter.get('/articles/:id/edit',\r\n    passport.authenticate('jwt-cookie', {\r\n        session: false,\r\n        failureRedirect: '/react'\r\n    }), function (req, res) {\r\n\r\n        let article_id = req.params.id;\r\n        let token = req.cookies['Token.JWT'];\r\n\r\n        if (article_id) {\r\n\r\n            articleService.getById(article_id)\r\n                .then((result) => {\r\n\r\n                    let dataContext = {\r\n                        article: result.data,\r\n                        token: token\r\n                    }\r\n\r\n                    let html = ReactDOMServer.renderToString(<EditArticlePage dataContext={dataContext} />);\r\n                    res.send(template(\r\n                        {\r\n                            body: html,\r\n                            title: 'Blog Log',\r\n                            scriptDest: 'react/editArticle.bundle.js',\r\n                            data: {\r\n                                article: result.data,\r\n                                token: token\r\n                            }\r\n                        }));\r\n\r\n                })\r\n                .catch((errorResult) => res.json(errorResult));\r\n\r\n        }\r\n});\r\n\r\n// articles page\r\nrouter.get('/articles/:pageNumber/:pageSize', function (req, res) {\r\n\r\n    if (/^\\d+$/.test(req.params.pageNumber)\r\n        && /^\\d+$/.test(req.params.pageNumber)) {\r\n            \r\n        let pageNumber = Number(req.params.pageNumber);\r\n        let pageSize = Number(req.params.pageSize);\r\n\r\n        articleService.get({}, (pageNumber - 1) * pageSize, pageSize)\r\n            .then((result) => {\r\n\r\n                let html = ReactDOMServer.renderToString(<ArticlesPage dataContext={result.data} />);\r\n                res.send(template(\r\n                    {\r\n                        body: html,\r\n                        title: 'Blog Log',\r\n                        scriptDest: 'react/articles.bundle.js',\r\n                        data: result.data\r\n                    }));\r\n\r\n            })\r\n            .catch((errorResult) => res.send(\"Error occured. \" + errorResult.message));\r\n    } else {\r\n        next();\r\n    }\r\n\r\n});\r\n\r\nrouter.get('/newarticle', passport.authenticate('jwt-cookie', { session: false }), function (req, res) {\r\n\r\n    let dataContext = {\r\n        isAuth: true,\r\n        token: req.cookies['Token.JWT']\r\n    };\r\n\r\n    let html = ReactDOMServer.renderToString(<NewArticlePage dataContext={dataContext} />);\r\n    res.send(template(\r\n        {\r\n            body: html,\r\n            title: 'Blog Log',\r\n            scriptDest: 'react/newArticle.bundle.js',\r\n            data: dataContext\r\n        })\r\n    );\r\n\r\n});\r\n\r\n// article details page\r\nrouter.get('/articles/:id',\r\n    passport.authenticate('jwt-cookie', {\r\n        session: false,\r\n        failureRedirect: '/react'\r\n    }), function (req, res) {\r\n        \r\n        let article_id = req.params.id;\r\n        let token = req.cookies['Token.JWT'];\r\n        \r\n        if (article_id) {\r\n\r\n            articleService.getById(article_id)\r\n                .then((result) => {\r\n\r\n                    commentService.getCommentsByArticleId(article_id, 0, 10)\r\n                        .then((resultComments) => {\r\n\r\n                            let html = ReactDOMServer.renderToString(<ArticleDetailsPage article={result.data} comments={resultComments.data} token={token} user_id={req.user.id}/>);\r\n                            res.send(template(\r\n                                {\r\n                                    body: html,\r\n                                    title: 'Blog Log',\r\n                                    scriptDest: 'react/articleDetails.bundle.js',\r\n                                    data: {\r\n                                        article: result.data,\r\n                                        comments: resultComments.data,\r\n                                        token: token,\r\n                                        user_id: req.user.id\r\n                                    }\r\n                                }));\r\n\r\n                        })\r\n                        .catch((errorResult) => res.send(\"Error occured. \" + errorResult.message));\r\n\r\n                })\r\n                .catch((errorResult) => res.json(errorResult));\r\n\r\n        }\r\n\r\n});\r\n\r\n\r\nrouter.get('/articles', function (req, res) {\r\n    \r\n    let isAuth = req.cookies && req.cookies['Token.JWT'];\r\n\r\n    articleService.get({}, 0, 10)\r\n        .then((result) => {\r\n\r\n            let dataContext = {\r\n                articles: result.data.data,\r\n                isAuth: isAuth,\r\n                count: result.data.count\r\n            };\r\n\r\n            let html = ReactDOMServer.renderToString(<ArticlesPage dataContext={dataContext} />);\r\n            res.send(template(\r\n                {\r\n                    body: html,\r\n                    title: 'Blog Log',\r\n                    scriptDest: 'react/articles.bundle.js',\r\n                    data: dataContext\r\n                }));\r\n\r\n        })\r\n        .catch((errorResult) => res.send(\"Error occured. \" + errorResult.message));\r\n});\r\n\r\n/* -------------- exports -------------- */\r\nexport default router;\n\n\n// WEBPACK FOOTER //\n// ./bloglog.ui.react/index.js","/* -------------- imports -------------- */\r\n// external\r\nimport { Router } from 'express';\r\n\r\n//locals\r\n// import articleRoutes from './articleRoutes.js';\r\n// import tagsRoutes from './tagsRoutes.js';\r\n// import userRoutes from './userRoutes.js';\r\n\r\n// import views to bundle them\r\nimport { } from './views/index.html';\r\n\r\n/* -------------- implementation -------------- */\r\n// create router\r\nconst router = Router();\r\n\r\n//\r\nrouter.use('/', function (req, res) {\r\n    res.render('./views/index.html');\r\n});\r\n\r\n/* -------------- exports -------------- */\r\nexport default router;\r\n\n\n\n// WEBPACK FOOTER //\n// ./bloglog.ui/index.js","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 53\n// module chunks = 0","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 54\n// module chunks = 0","module.exports = require(\"ejs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ejs\"\n// module id = 55\n// module chunks = 0","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 56\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 57\n// module chunks = 0","/* -------------- imports -------------- */\r\n// external\r\nimport { Router } from 'express';\r\nimport passport from 'passport';\r\n\r\n// locals\r\nimport { articleService, commentService } from '../bloglog.services';\r\nimport ArticleModel from '../bloglog.models/articleModel.js';\r\nimport CommentModel from '../bloglog.models/commentModel.js';\r\n\r\nimport Result from '../bloglog.common/result.js';\r\nimport ResultCodes from '../bloglog.common/resultCodes.js';\r\n\r\n\r\n\r\n/* -------------- implementation -------------- */\r\n// create router\r\nconst router = Router();\r\n\r\n/*\r\n    get recent articles\r\n*/\r\nrouter.get('/', (req, res, next) => {\r\n\r\n  articleService.getRecent()\r\n    .then((result) => {\r\n      res.json(result);\r\n    })\r\n    .catch((errorResult) => {\r\n      res.json(errorResult);\r\n    });\r\n\r\n});\r\n\r\n/*\r\n    get recent article by id\r\n*/\r\nrouter.get('/:id', (req, res, next) => {\r\n\r\n  var article_id = req.params.id;\r\n  articleService.getById(article_id)\r\n    .then((result) => {\r\n      res.json(result);\r\n    })\r\n    .catch((errorResult) => {\r\n      res.json(errorResult);\r\n    });\r\n\r\n});\r\n\r\n/*\r\n    creates new article\r\n*/\r\nrouter.post('/', passport.authenticate('jwt', { session: false }), (req, res, next) => {\r\n\r\n  articleService.add(\r\n    new ArticleModel(\r\n      null,\r\n      req.body.title,\r\n      req.body.text,\r\n      req.body.description,\r\n      req.body.tags,\r\n      Date.now(),\r\n      Date.now(),\r\n      {\r\n        \"user_id\": req.user.id,\r\n        \"name\": req.user.name\r\n      }))\r\n    .then((result) => res.json(result))\r\n    .catch((errorResult) => res.json(errorResult));\r\n\r\n});\r\n\r\n/*\r\n    gets articles accordeing the given filter\r\n*/\r\nrouter.post('/:pageNumber/:pageSize', passport.authenticate('jwt', { session: false }), (req, res, next) => {\r\n\r\n  let pageNumber = Number(req.params.pageNumber);\r\n  let pageSize = Number(req.params.pageSize);\r\n  if (req.body.filterData) {\r\n    articleService.get(req.body.filterData, (pageNumber - 1) * pageSize, pageSize)\r\n      .then((result) => res.json(result))\r\n      .catch((errorResult) => res.json(errorResult));\r\n  } else {\r\n    res.json(new Result(null, false, \"The given filter data is invalid\", ResultCodes.InvalidArguments()));\r\n  }\r\n\r\n});\r\n\r\n/*\r\n    updates the article\r\n*/\r\nrouter.put('/', passport.authenticate('jwt', { session: false }), (req, res, next) => {\r\n  \r\n  articleService.update(\r\n    new ArticleModel(\r\n      req.body.id,\r\n      req.body.title,\r\n      req.body.text,\r\n      req.body.description,\r\n      req.body.tags,\r\n      req.body.createDateTime,\r\n      Date.now(),\r\n      {\r\n        \"user_id\": req.user.id,\r\n        \"name\": req.user.name\r\n      }))\r\n    .then(result => res.json(result))\r\n    .catch((errorResult) => res.json(errorResult));\r\n\r\n});\r\n\r\n/*\r\n    deletes the article\r\n*/\r\nrouter.delete('/:id', passport.authenticate('jwt', { session: false }), (req, res, next) => {\r\n\r\n  var article_id = req.params.id;\r\n  articleService.delete(\r\n    new ArticleModel(\r\n      article_id,\r\n      null,\r\n      null,\r\n      null,\r\n      null,\r\n      null,\r\n      null,\r\n      {\r\n        \"user_id\": req.user.id,\r\n        \"name\": req.user.name\r\n      }))\r\n    .then(result => res.json(result))\r\n    .catch((errorResult) => res.json(errorResult));\r\n\r\n});\r\n\r\n\r\n///////////// article comments section //////////////////////\r\nrouter.get('/:id/comments/:pageNumber/:pageSize', passport.authenticate('jwt', { session: false }), (req, res, next) => {\r\n\r\n  let article_id = req.params.id;\r\n  let pageNumber = Number(req.params.pageNumber);\r\n  let pageSize = Number(req.params.pageSize);\r\n\r\n  commentService.getCommentsByArticleId(article_id, (pageNumber - 1) * pageSize, pageSize)\r\n    .then((result) => res.json(result))\r\n    .catch((errorResult) => res.json(errorResult));\r\n\r\n});\r\n\r\nrouter.post('/:id/comments/add', passport.authenticate('jwt', { session: false }), (req, res, next) => {\r\n  \r\n  let article_id = req.params.id;\r\n  commentService.add(\r\n    new CommentModel(\r\n      null,\r\n      req.body.text,\r\n      {\r\n        \"user_id\": req.user.id,\r\n        \"name\": req.user.name\r\n      },\r\n      Date.now(),\r\n      article_id))\r\n    .then(result => res.json(result))\r\n    .catch((errorResult) => res.json(errorResult));\r\n\r\n});\r\n\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport default router;\n\n\n// WEBPACK FOOTER //\n// ./bloglog.api/articleRoutes.js","// external\r\nimport { Router } from 'express';\r\n\r\n// locals\r\nimport { tagService } from '../bloglog.services';\r\nimport TagModel from '../bloglog.models/tagModel.js';\r\n\r\n// create router\r\nconst router = Router();\r\n\r\n/*\r\n    get all\r\n*/\r\nrouter.get('/', (req, res, next) => {\r\n  tagService.getTagsByText(req.query.text)\r\n    .then(function (result) {\r\n      res.json(result);\r\n    })\r\n    .catch(function (errorResult) {\r\n      res.json(errorResult);\r\n    });\r\n    \r\n});\r\n\r\n// We add tags with articles\r\n// router.post('/', (req, res, next) => {\r\n\r\n//   tagService.add(\r\n//     new TagModel(\r\n//       null,\r\n//       req.body.value,\r\n//       []))\r\n//     .then(() => res.sendStatus(200))\r\n//     .catch((result) => res.json(result));\r\n\r\n// });\r\n\r\nexport default router;\n\n\n// WEBPACK FOOTER //\n// ./bloglog.api/tagsRoutes.js","'use strict';\r\n// external\r\nimport mongoose from 'mongoose';\r\n\r\n//locals\r\n// import articleRoutes from './articleRoutes.js';\r\n\r\n/* -------------- implementation -------------- */\r\nvar articleSchema = new mongoose.Schema({\r\n    'title': {\r\n        type: String,\r\n        required: true\r\n    },\r\n    'text': {\r\n        type: String,\r\n        required: true,\r\n    },\r\n    'description': {\r\n        type: String,\r\n        required: true,\r\n    },\r\n    'tags': {\r\n        type: Array,\r\n        default: []\r\n    },\r\n    'createDateTime': {\r\n        type: Date,\r\n        default: Date.now()\r\n    },\r\n    'updateDateTime': {\r\n        type: Date,\r\n        default: Date.now()\r\n    },\r\n    'user': {\r\n        'user_id': {\r\n            type: mongoose.Schema.Types.ObjectId,\r\n            required: true,\r\n        },\r\n        'name': {\r\n            type: String,\r\n            required: true\r\n        }\r\n    }\r\n});\r\n\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport default mongoose.model('articles', articleSchema);\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseModels/articleDataModel.js","'use strict';\r\n// external\r\nimport mongoose from 'mongoose';\r\n\r\n//locals\r\n// import articleRoutes from './articleRoutes.js';\r\n\r\n/* -------------- implementation -------------- */\r\nvar commentSchema = new mongoose.Schema({\r\n    'article_id': {\r\n        type: mongoose.Schema.Types.ObjectId,\r\n        required: true\r\n    },\r\n    'text': {\r\n        type: String,\r\n        required: true,\r\n    },\r\n    'createDateTime': {\r\n        type: Date,\r\n        default: Date.now()\r\n    },\r\n    'user': {\r\n        'user_id': {\r\n            type: mongoose.Schema.Types.ObjectId,\r\n            required: true,\r\n        },\r\n        'name': {\r\n            type: String,\r\n            required: true\r\n        }\r\n    }\r\n});\r\n\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport default mongoose.model('comments', commentSchema);\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseModels/commentDataModel.js","'use strict';\r\n// external\r\nimport mongoose from 'mongoose';\r\n\r\n//locals\r\n\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nlet tagSchema = new mongoose.Schema({\r\n\t'value': {\r\n\t\ttype: String,\r\n\t\trequired: true,\r\n\t\tunique: true\r\n\t},\r\n\t'articles': {\r\n\t\ttype: Array,\r\n\t\tdefault: []\r\n\t}\r\n});\r\n\r\n/* -------------- exports -------------- */\r\nexport default mongoose.model('tags', tagSchema);\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseModels/tagDataModel.js","'use strict';\r\n// external\r\nimport mongoose from 'mongoose';\r\n\r\n//locals\r\n\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nvar userSchema = new mongoose.Schema({\r\n\t'name': {\r\n\t\ttype: String,\r\n\t\trequired: true,\r\n\t\tunique: true\r\n\t},\r\n\t'email': {\r\n\t\ttype: String,\r\n\t\trequired: true,\r\n\t\tunique: true\r\n\t},\r\n\t'password': {\r\n\t\ttype: String,\r\n\t\trequired: true\r\n\t}\r\n});\r\n\r\n\r\n\r\n/* -------------- exports -------------- */\r\nexport default mongoose.model('users', userSchema);\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseModels/userDataModel.js","'use strict';\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\nimport articleDataModel from '../mongooseModels/articleDataModel.js';\r\nimport ArticleModel from '../../bloglog.models/articleModel.js';\r\nimport Result from '../../bloglog.common/result.js';\r\nimport PageResult from '../../bloglog.common/pageResult.js';\r\nimport ResultCodes from '../../bloglog.common/resultCodes.js';\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class ArticleRepository {\r\n    constructor() {\r\n    }\r\n\r\n    /*\r\n     * gets articles\r\n     */\r\n    get(skip, count) {\r\n        return new Promise(function (resolve, reject) {\r\n\r\n            articleDataModel\r\n                .find({})\r\n                .sort('-createDateTime')\r\n                .skip(skip)\r\n                .limit(count)\r\n                .exec(function (err, articles) {\r\n                    if (err) {\r\n                        reject(new Result(null, false, err, ResultCodes.Error()));\r\n                    }\r\n                    else if (!articles) {\r\n                        reject(new Result(null, false, err, ResultCodes.ObjectNotFound()));\r\n                    }\r\n                    else {\r\n                        let articleModels = [];\r\n                        for (let article of articles) {\r\n                            articleModels.push(MapToArticleModel(article));\r\n                        }\r\n\r\n                        articleDataModel.count(function (err, count) {\r\n                            if (err) {\r\n                                reject(new Result(null, false, err, ResultCodes.Error()));\r\n                            }\r\n\r\n                            resolve(new Result(new PageResult(articleModels, count), true, \"\", ResultCodes.Success()));\r\n                        });\r\n                    }\r\n                });\r\n\r\n        });\r\n    }\r\n\r\n    getByTagValue(filterData, skip, count) {\r\n        \r\n        let queryFilter = {};\r\n        if(filterData.tags){\r\n            queryFilter[\"tags\"] = { $all: filterData.tags };\r\n        }\r\n\r\n        return new Promise(function (resolve, reject) {\r\n\r\n            articleDataModel\r\n                .find(queryFilter)\r\n                .sort('-createDateTime')\r\n                .skip(skip)\r\n                .limit(count)\r\n                .exec(function (err, articles) {\r\n                    if (err) {\r\n                        reject(new Result(null, false, err, ResultCodes.Error()));\r\n                    }\r\n                    else if (!articles) {\r\n                        reject(new Result(null, false, err, ResultCodes.ObjectNotFound()));\r\n                    }\r\n                    else {\r\n                        let articleModels = [];\r\n                        for (let article of articles) {\r\n                            articleModels.push(MapToArticleModel(article));\r\n                        }\r\n\r\n                        articleDataModel.count(queryFilter, function (err, count) {\r\n                            if (err) {\r\n                                reject(new Result(null, false, err, ResultCodes.Error()));\r\n                            }\r\n\r\n                            resolve(new Result(new PageResult(articleModels, count), true, \"\", ResultCodes.Success()));\r\n                        });\r\n                    }\r\n                });\r\n        });\r\n    }\r\n\r\n    /*\r\n     * gets article by Id\r\n     */\r\n    getById(id) {\r\n        return new Promise(function (resolve, reject) {\r\n\r\n            articleDataModel\r\n                .findOne({ '_id': id })\r\n                .exec(function (err, article) {\r\n                    if (err) {\r\n                        reject(new Result(null, false, err, ResultCodes.Error()));\r\n                    }\r\n                    else if (!article) {\r\n                        reject(new Result(null, false, err, ResultCodes.ObjectNotFound()));\r\n                    }\r\n                    else {\r\n                        resolve(new Result(MapToArticleModel(article), true, \"\", ResultCodes.Success()));\r\n                    }\r\n                });\r\n\r\n        });\r\n    }\r\n\r\n    /*\r\n     * adds article\r\n     */\r\n    add(articleModel) {\r\n        return new Promise(function (resolve, reject) {\r\n\r\n            articleDataModel.create(articleModel, function (err, articleCreatedDataModel) {\r\n                if (err) {\r\n                    reject(new Result(null, false, err, ResultCodes.Error()));\r\n                }\r\n                else if (!articleCreatedDataModel) {\r\n                    reject(new Result(null, false, err, ResultCodes.Error()));\r\n                }\r\n                else {\r\n                    resolve(new Result(MapToArticleModel(articleCreatedDataModel), true, \"\", ResultCodes.Success()));\r\n                }\r\n            });\r\n\r\n        });\r\n    }\r\n\r\n    /*\r\n     * update article\r\n     */\r\n    update(articleModel) {\r\n        return new Promise(function (resolve, reject) {\r\n\r\n            articleDataModel.findByIdAndUpdate(\r\n                articleModel.id,\r\n                {\r\n                    title: articleModel.title,\r\n                    text: articleModel.text,\r\n                    description: articleModel.description,\r\n                    tags: articleModel.tags\r\n                },\r\n                { new: true },\r\n                function (err, updatedArticleDataModel) {\r\n                    if (err) {\r\n                        reject(new Result(null, false, err, ResultCodes.Error()));\r\n                    }\r\n\r\n                    resolve(new Result(MapToArticleModel(updatedArticleDataModel), true, \"updated succesful\", ResultCodes.Success()));\r\n                });\r\n\r\n        });\r\n    }\r\n\r\n    /*\r\n     * deletes article\r\n     */\r\n    delete(articleModel) {\r\n        return new Promise(function (resolve, reject) {\r\n\r\n            articleDataModel.findByIdAndRemove(articleModel.id, {}, function (err, deletedArticleDataModel) {\r\n                if (err) {\r\n                    reject(new Result(null, false, err, ResultCodes.Error()));\r\n                }\r\n\r\n                resolve(new Result(null, true, \"deleted succesful\", ResultCodes.Success()));\r\n            });\r\n\r\n        });\r\n    }\r\n\r\n};\r\n\r\n\r\nfunction MapToArticleModel(articleDataModel) {\r\n    return new ArticleModel(\r\n        articleDataModel._id,\r\n        articleDataModel.title,\r\n        articleDataModel.text,\r\n        articleDataModel.description,\r\n        articleDataModel.tags,\r\n        articleDataModel.createDateTime,\r\n        articleDataModel.updateDateTime,\r\n        articleDataModel.user);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseRepositories/articleRepository.js","'use strict';\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\nimport commentDataModel from '../mongooseModels/commentDataModel.js';\r\nimport CommentModel from '../../bloglog.models/commentModel.js';\r\nimport Result from '../../bloglog.common/result.js';\r\nimport PageResult from '../../bloglog.common/pageResult.js';\r\nimport ResultCodes from '../../bloglog.common/resultCodes.js';\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class CommentRepository {\r\n    constructor() {\r\n    }\r\n\r\n    /*\r\n     * gets comments of the given article\r\n     */\r\n    getByArticleId(article_id, skip, count) {\r\n        return new Promise(function (resolve, reject) {\r\n\r\n            commentDataModel\r\n                .find({ 'article_id': article_id })\r\n                .sort('-createDateTime')\r\n                .skip(skip)\r\n                .limit(count)\r\n                .exec(function (err, comments) {\r\n                    if (err) {\r\n                        reject(new Result(null, false, err, ResultCodes.Error()));\r\n                    }\r\n                    else if (!comments) {\r\n                        reject(new Result(null, false, err, ResultCodes.ObjectNotFound()));\r\n                    }\r\n                    else {\r\n                        let commentModels = [];\r\n                        for (let comment of comments) {\r\n                            commentModels.push(MapToCommentModel(comment));\r\n                        }\r\n                        resolve(new Result(commentModels, true, \"\", ResultCodes.Success()));\r\n                    }\r\n                });\r\n\r\n        });\r\n    }\r\n\r\n    /*\r\n     * adds comment\r\n     */\r\n    add(commentModel) {\r\n        return new Promise(function (resolve, reject) {\r\n\r\n            commentDataModel.create(commentModel, function (err, commentCreatedDataModel) {\r\n                if (err) {\r\n                    reject(new Result(null, false, err, ResultCodes.Error()));\r\n                }\r\n                else if (!commentCreatedDataModel) {\r\n                    reject(new Result(null, false, err, ResultCodes.Error()));\r\n                }\r\n                else {\r\n                    resolve(new Result(MapToCommentModel(commentCreatedDataModel), true, \"\", ResultCodes.Success()));\r\n                }\r\n            });\r\n\r\n        });\r\n    }\r\n\r\n    /*\r\n     * Removes comments for given article Id\r\n     */\r\n    deleteForArticleId(article_id) {\r\n        return new Promise(function (resolve, reject) {\r\n            \r\n            commentDataModel\r\n                .find({ \"article_id\": article_id })\r\n                .remove(function (err, commentCreatedDataModel) {\r\n                    if (err) {\r\n                        reject(new Result(null, false, err, ResultCodes.Error()));\r\n                    }\r\n                    else if (!commentCreatedDataModel) {\r\n                        reject(new Result(null, false, err, ResultCodes.Error()));\r\n                    }\r\n                    else {\r\n                        resolve(new Result(MapToCommentModel(commentCreatedDataModel), true, \"\", ResultCodes.Success()));\r\n                    }\r\n                });\r\n\r\n        });\r\n    }\r\n\r\n}\r\n\r\nfunction MapToCommentModel(commentDataModel) {\r\n    return new CommentModel(\r\n        commentDataModel._id,\r\n        commentDataModel.text,\r\n        commentDataModel.user,\r\n        commentDataModel.createDateTime,\r\n        commentDataModel.article_id);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseRepositories/commentRepository.js","'use strict';\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\nimport tagDataModel from '../mongooseModels/tagDataModel.js';\r\nimport TagModel from '../../bloglog.models/tagModel.js';\r\nimport Result from '../../bloglog.common/result.js';\r\nimport ResultCodes from '../../bloglog.common/resultCodes.js';\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class TagRepository {\r\n  constructor() {\r\n  }\r\n\r\n  /*\r\n   * gets tags by values\r\n   */\r\n  getByValues(values) {\r\n      \r\n      return new Promise(function (resolve, reject) {\r\n          tagDataModel\r\n              .find({value: {$in: values}})\r\n              .exec(function (err, tags) {\r\n                  if (err) {\r\n                      reject(new Result(null, false, err, ResultCodes.Error()));\r\n                  }\r\n                  else if (!tags) {\r\n                      reject(new Result(null, false, err, ResultCodes.ObjectNotFound()));\r\n                  }\r\n                  else {\r\n                      let tagModels = [];\r\n                      for (let tag of tags) {\r\n                          tagModels.push(MapToTagModel(tag));\r\n                      }\r\n\r\n                      resolve(new Result(tagModels, true, \"\", ResultCodes.Success()));\r\n                  }\r\n              });\r\n      });\r\n  };\r\n\r\n  /*\r\n   * gets tags, that contain given text in values\r\n   */\r\n  getContainsText(text) {\r\n\r\n      return new Promise(function (resolve, reject) {\r\n          tagDataModel\r\n              .find({ value: { \"$regex\": text, \"$options\": \"i\" } })\r\n              .exec(function (err, tags) {\r\n                  if (err) {\r\n                      reject(new Result(null, false, err, ResultCodes.Error()));\r\n                  }\r\n                  else if (!tags) {\r\n                      reject(new Result(null, false, err, ResultCodes.ObjectNotFound()));\r\n                  }\r\n                  else {\r\n                      let tagModels = [];\r\n                      for (let tag of tags) {\r\n                          tagModels.push(MapToTagModel(tag));\r\n                      }\r\n\r\n                      resolve(new Result(tagModels, true, \"\", ResultCodes.Success()));\r\n                  }\r\n              });\r\n      });\r\n  };\r\n\r\n  getArticleIdsByTagIds(tagIds, skip, count) {\r\n      return new Promise(function (resolve, reject) {\r\n          \r\n          tagDataModel\r\n              .find({ _id: { \"$in\": tagIds } })\r\n              .exec(function (err, tags) {\r\n                  if (err) {\r\n                      reject(new Result(null, false, err, ResultCodes.Error()));\r\n                  }\r\n                  else if (!tags) {\r\n                      reject(new Result(null, false, err, ResultCodes.ObjectNotFound()));\r\n                  }\r\n                  else {\r\n                      let tagModels = [];\r\n                      for (let tag of tags) {\r\n                          tagModels.push(MapToTagModel(tag));\r\n                      }\r\n\r\n                      resolve(new Result(tagModels, true, \"\", ResultCodes.Success()));\r\n                  }\r\n              });\r\n      });\r\n  }\r\n\r\n  createOrUpdateByArticleId(articleId, tagValues) {\r\n      return new Promise(function (resolve, reject) {\r\n\r\n          let updates = [];\r\n          for (let tagValue of tagValues) {\r\n              updates.push({\r\n                  q: { value: tagValue }, // query - selector for which item apply updates\r\n                  u: { $set: { value: tagValue }, $addToSet: { articles: articleId } }, // updates - what updates apply to item\r\n                  upsert: true // if item does not exists - creates new one.\r\n              });\r\n          }\r\n          \r\n          tagDataModel.db.db.command({\r\n              update: \"tags\",\r\n              updates: updates,\r\n              ordered: true,\r\n              writeConcern: { w: \"majority\", wtimeout: 10000 }\r\n          })\r\n            .then(commandResult =>\r\n                resolve(new Result(commandResult.upserted, true, \"Success\", ResultCodes.Success()))\r\n            ).catch(() =>\r\n                reject(\r\n                    new Result(\r\n                        commandResult,\r\n                        false,\r\n                        update.writeErrors ? update.writeErrors.errmsg : \"\" + \". \" + update.writeConcernError ? update.writeConcernError.errmsg : \"\",\r\n                        ResultCodes.Error()))\r\n            );\r\n      });\r\n  }\r\n\r\n  /*\r\n   * adds tag\r\n   */\r\n  add(tag) {\r\n    return tagDataModel.create(tag);\r\n  };\r\n};\r\n\r\n\r\nfunction MapToTagModel(tagDataModel) {\r\n    return new TagModel(\r\n        tagDataModel._id,\r\n        tagDataModel.value,\r\n        tagDataModel.articles_ids);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseRepositories/tagRepository.js","'use strict';\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\nimport userDataModel from '../mongooseModels/userDataModel.js';\r\nimport UserModel from '../../bloglog.models/userModel.js';\r\nimport Result from '../../bloglog.common/result.js';\r\nimport ResultCodes from '../../bloglog.common/resultCodes.js';\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class UserRepository {\r\n  constructor() {\r\n  }\r\n\r\n  /*\r\n   * gets user\r\n   */\r\n  get(email) {\r\n\r\n    return new Promise(function (resolve, reject) {\r\n      userDataModel\r\n        .findOne({ \"email\": email })\r\n        .exec(function (err, user) {\r\n          if (err) {\r\n            reject(new Result(null, false, err, ResultCodes.Error()));\r\n          }\r\n          else if (!user) {\r\n            reject(new Result(null, false, err, ResultCodes.ObjectNotFound()));\r\n          }\r\n          else {\r\n            resolve(new Result(MapToUserModel(user), true, \"\", ResultCodes.Success()));\r\n          }\r\n        });\r\n    });\r\n\r\n  };\r\n\r\n  /*\r\n   * adds tag\r\n   */\r\n  add(user) {\r\n    return userDataModel.create(user);\r\n  };\r\n};\r\n\r\nfunction MapToUserModel(user) {\r\n  return new UserModel(\r\n    user._id,\r\n    user.name,\r\n    user.email,\r\n    user.password\r\n  );\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.repositories/mongooseRepositories/userRepository.js","/* -------------- imports -------------- */\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\nimport Article from '../bloglog.models/articleModel.js';\r\nimport { articleRepository, commentRepository } from '../bloglog.repositories';\r\nimport Result from '../bloglog.common/result.js';\r\nimport ResultCodes from '../bloglog.common/resultCodes.js';\r\nimport { tagService } from '../bloglog.services';\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class ArticleService {\r\n  constructor() {\r\n  }\r\n\r\n  /*\r\n   * gets recent articles\r\n   */\r\n  getRecent() {\r\n    return articleRepository.get(0, 10);\r\n  };\r\n\r\n  get(filterData, skip, count){\r\n    \r\n    return new Promise(function (resolve, reject) {\r\n      articleRepository.getByTagValue(filterData, skip, count)\r\n        .then(result => {\r\n          resolve(result);\r\n        })\r\n        .catch(errorResult => {\r\n          reject(errorResult);\r\n        });\r\n\r\n    });\r\n  }\r\n  \r\n  getById(id){\r\n    \r\n    return new Promise(function (resolve, reject) {\r\n      articleRepository.getById(id)\r\n        .then(result => {\r\n          resolve(result);\r\n        })\r\n        .catch(errorResult => {\r\n          reject(errorResult);\r\n        });\r\n\r\n    });\r\n  }\r\n\r\n  /*\r\n   * adds article\r\n   */\r\n  add(articleModel) {\r\n\r\n    if (checkArticle(articleModel)) {\r\n      return new Promise(function (resolve, reject) {\r\n\r\n        articleRepository.add(articleModel)\r\n          .then(addArticleResult => {\r\n            tagService.createOrUpdateByArticleId(addArticleResult.data.id, articleModel.tags)\r\n              .then((result) => {\r\n                resolve(addArticleResult);\r\n              })\r\n              .catch((errorResult) => {\r\n                reject(errorResult);\r\n              });\r\n          })\r\n          .catch(addArticleErrorResult => resolve(addArticleErrorResult));\r\n      });\r\n    }\r\n\r\n    return Promise.reject(new Result(null, false, \"\", ResultCodes.InvalidObject()));\r\n  };\r\n\r\n  /*\r\n   * updates given article\r\n   */\r\n  update(articleModel) {\r\n\r\n    // if articleModel is not valid - return error\r\n    if(!checkArticle(articleModel)){\r\n        return Promise.reject(new Result(null, false, \"The given article is not valid\", ResultCodes.InvalidObject()));\r\n    }\r\n\r\n    return new Promise(function (resolve, reject) {\r\n\r\n      // find given article in storage\r\n      articleRepository.getById(articleModel.id)\r\n        .then(function (result) {\r\n\r\n          if (result.success) {\r\n            let articleFromStorage = result.data;\r\n\r\n            // Check the article does not change owner. (i.e. check that you update your own article)\r\n            if (articleFromStorage.user.user_id.equals(articleModel.user.user_id)) {\r\n\r\n              articleFromStorage.title = articleModel.title;\r\n              articleFromStorage.text = articleModel.text;\r\n              articleFromStorage.description = articleModel.description;\r\n              articleFromStorage.tags = articleModel.tags;\r\n              // TODO: update tags table when tags were changed.\r\n\r\n              articleRepository.update(articleModel)\r\n                .then(result => {\r\n                  resolve(result);\r\n                })\r\n                .catch(errorResult => {\r\n                  reject(errorResult);\r\n                });\r\n              return;\r\n            }\r\n            \r\n            // given article and stored article have different owners - it is error:\r\n            // the article can't change the owner\r\n            reject(new Result(null, false, \"Given article has wrong user_id. The article can't change the owner.\", ResultCodes.InvalidObject()));\r\n          }\r\n          else{\r\n            reject(result);\r\n          }\r\n\r\n        })\r\n        .catch(function (errorResult) {\r\n          // article was not found in storage or some error occured\r\n          reject(errorResult);\r\n        });\r\n        \r\n    });\r\n  }\r\n\r\n  /*\r\n   * deletes given article\r\n   */\r\n  delete(articleModel) {\r\n    \r\n    return new Promise(function (resolve, reject) {\r\n\r\n      // find given article in storage\r\n      articleRepository.getById(articleModel.id)\r\n        .then(function (result) {\r\n\r\n          if (result.success) {\r\n            let articleFromStorage = result.data;\r\n\r\n            // Check the article does not change owner. (i.e. check that you delete your own article)\r\n            if (articleFromStorage.user.user_id.equals(articleModel.user.user_id)) {\r\n\r\n              // Remove comments\r\n              commentRepository.deleteForArticleId(articleModel.id)\r\n                .then(() => {\r\n                  \r\n                  // Delete article\r\n                  articleRepository.delete(articleModel)\r\n                    .then(result => {\r\n                      resolve(result);\r\n                    })\r\n                    .catch(errorResult => {\r\n                      reject(errorResult);\r\n                    });\r\n\r\n                })\r\n                .catch(errorResult => {\r\n                  reject(errorResult);\r\n                });\r\n\r\n              return;\r\n            }\r\n\r\n            // given article and stored article have different owners - it is error:\r\n            // the article can't change the owner\r\n            reject(new Result(null, false, \"Given article has wrong user_id. The article can't change the owner.\", ResultCodes.InvalidObject()));\r\n          }\r\n          else {\r\n            reject(result);\r\n          }\r\n        })\r\n        .catch(function (errorResult) {\r\n          // article was not found in storage or some error occured\r\n          reject(errorResult);\r\n        });\r\n    });\r\n  }\r\n  \r\n};\r\n\r\nfunction checkArticle(article) {\r\n  if (!article.title\r\n    || article.title.length === 0\r\n    || article.title.length > 150) {\r\n    return false;\r\n  }\r\n\r\n  if (!article.description\r\n    || article.description.length === 0\r\n    || article.description.length > 300) {\r\n    return false;\r\n  }\r\n\r\n  if (!article.text\r\n    || article.text.length === 0\r\n    || article.text.length > 20000) {\r\n    return false;\r\n  }\r\n\r\n  if (!article.user\r\n    || !article.user.user_id\r\n    || !article.user.name) {\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.services/articleService.js","/* -------------- imports -------------- */\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\nimport Comment from '../bloglog.models/commentModel.js';\r\nimport { commentRepository, articleRepository } from '../bloglog.repositories';\r\nimport Result from '../bloglog.common/result.js';\r\nimport ResultCodes from '../bloglog.common/resultCodes.js';\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class CommentService {\r\n  constructor() {\r\n  }\r\n\r\n  /*\r\n   * gets tags\r\n   */\r\n  getCommentsByArticleId(article_id, skip, count) {\r\n    return commentRepository.getByArticleId(article_id, skip, count);\r\n  };\r\n\r\n  /*\r\n   * adds comment to article\r\n   */\r\n  add(commentModel) {\r\n    \r\n    // if commentModel is not valid - return error\r\n    if (!checkComment(commentModel)) {\r\n      return Promise.reject(new Result(null, false, \"The given comment is not valid\", ResultCodes.InvalidObject()));\r\n    }\r\n\r\n    return new Promise(function (resolve, reject) {\r\n\r\n      articleRepository.getById(commentModel.article_id)\r\n\r\n        .then(function (result) {\r\n          if (result.success) {\r\n            commentRepository.add(commentModel)\r\n              .then(result => {\r\n                if (result.success) {\r\n                  resolve(result);\r\n                }\r\n                else {\r\n                  reject(result);\r\n                }\r\n              })\r\n              .catch(errorResult => {\r\n                reject(errorResult);\r\n              });\r\n          }\r\n          else {\r\n            reject(result);\r\n          }\r\n        })\r\n\r\n        .catch(function (errorResult) {\r\n          reject(new Result(null, false, errorResult.message, errorResult.code));\r\n        });\r\n\r\n    });\r\n  }\r\n\r\n}\r\n\r\n\r\n// inner functions\r\nfunction checkComment(comment) {\r\n  if (!comment.text\r\n    || comment.text.length === 0\r\n    || comment.text.length > 5000) {\r\n    return false;\r\n  }\r\n\r\n  if (!comment.user\r\n    || !comment.user.user_id\r\n    || !comment.user.name\r\n  ) {\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.services/commentService.js","/* -------------- imports -------------- */\r\n// external\r\n// import { Router } from 'express';\r\n\r\n//locals\r\nimport Tag from '../bloglog.models/tagModel.js';\r\nimport { tagRepository } from '../bloglog.repositories';\r\nimport Result from '../bloglog.common/result.js';\r\nimport ResultCodes from '../bloglog.common/resultCodes.js';\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class TagService {\r\n  constructor() {\r\n  }\r\n\r\n  /*\r\n   * gets tags contains text\r\n   */\r\n  getTagsByText(text) {\r\n    return tagRepository.getContainsText(text);\r\n  };\r\n\r\n  /*\r\n   * gets tags by values\r\n   */\r\n  getArticleIdsByTagIds(tagIds, skip, count) {\r\n    if(Array.isArray(tagIds)){\r\n        return tagRepository.getArticleIdsByTagIds(tagIds, skip, count);\r\n    }\r\n\r\n    return Promise.reject(new Result(null, false, \"Given tagIds is not Array\", ResultCodes.InvalidObject()))\r\n  };\r\n\r\n  /*\r\n   * creates or updates tags with articleId\r\n   */\r\n  createOrUpdateByArticleId(articleId, tagValues) {\r\n    if (Array.isArray(tagValues)) {\r\n      return tagRepository.createOrUpdateByArticleId(articleId, tagValues);\r\n    }\r\n\r\n    return Promise.reject(new Result(null, false, \"Given tag values is not Array\", ResultCodes.InvalidObject()))\r\n  }\r\n\r\n  /*\r\n   * adds tag\r\n   */\r\n  add(tagModel) {\r\n    if(checkTag(tagModel)){\r\n        return new tagRepository.add(tagModel);\r\n    }\r\n\r\n    return Promise.reject(new Result(null, false, \"\", ResultCodes.InvalidObject()));\r\n  };\r\n};\r\n\r\n\r\nfunction checkTag(tag){\r\n    if(!tag.value\r\n      || tag.value.length === 0\r\n      || tag.value.length > 50){\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./bloglog.services/tagService.js","/* -------------- imports -------------- */\r\n// external\r\nimport { Md5 } from 'ts-md5/dist/md5';\r\n\r\n//locals\r\nimport User from '../bloglog.models/userModel.js';\r\nimport { userRepository } from '../bloglog.repositories';\r\nimport Result from '../bloglog.common/result.js';\r\nimport ResultCodes from '../bloglog.common/resultCodes.js';\r\n\r\n\r\n/* -------------- implementation -------------- */\r\nexport default class UserService {\r\n  constructor() {\r\n  }\r\n\r\n  /*\r\n   * gets user\r\n   */\r\n  get(email) {\r\n\r\n    return userRepository.get(email);\r\n    \r\n  };\r\n\r\n  /*\r\n   * adds user\r\n   */\r\n  add(userModel) {\r\n\r\n    if (checkUser(userModel)) {\r\n      // we must not keep password as it is - so we hash it.\r\n      userModel.password = Md5.hashStr(userModel.password);\r\n      return new userRepository.add(userModel);\r\n    }\r\n\r\n    return Promise.reject(new Result(null, false, \"\", ResultCodes.InvalidObject()));\r\n\r\n  };\r\n\r\n  checkPassword(user, password){\r\n    return user.password === Md5.hashStr(password);\r\n  }\r\n};\r\n\r\nfunction checkUser(user) {\r\n  if (!user.email\r\n    || user.email.length === 0\r\n    || user.email.length > 100) {\r\n    return false;\r\n  }\r\n\r\n  if (!user.name\r\n    || user.name.length === 0\r\n    || user.name.length > 100) {\r\n    return false;\r\n  }\r\n\r\n  if (!user.password\r\n    || user.password.length === 0\r\n    || user.password.length > 100) {\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.services/userService.js","import React from 'react';\r\n\r\n\r\n\r\nexport default class ArticleDetail extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t}\r\n\r\n\trender() {\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div>{this.props.article.title}</div>\r\n\t\t\t\t<div>{this.props.article.tags}</div>\r\n\t\t\t\t<div>{this.props.article.text}</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.ui.react/components/articleDetail.js","import React from 'react';\r\nimport { List, ListItem } from 'material-ui/List';\r\n\r\n\r\n\r\nexport default class ArticlesList extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t}\r\n\r\n\tselectArticle(id){\r\n\t\twindow.location.href = window.location.href + '/' + id;\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\treturn (\r\n\t\t\t<List>\r\n\t\t\t\t{this.props.articles.map((article, i) =>\r\n\t\t\t\t\t<ListItem\r\n\t\t\t\t\t    key={i}\r\n\t\t\t\t\t\tprimaryText={article.title}\r\n\t\t\t\t\t\tsecondaryText={article.description}\r\n\t\t\t\t\t\tonTouchTap={this.selectArticle.bind(this, article.id)}/>\r\n\t\t\t\t)}\r\n\t\t\t</List>\r\n\t\t)\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.ui.react/components/articlesList.js","import React from 'react';\r\nimport { List, ListItem } from 'material-ui/List';\r\n\r\n\r\n\r\nexport default class Comments extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <List>\r\n                {this.props.comments.map((comment, i) =>\r\n                    <ListItem\r\n                        key={i}\r\n                        disabled={true}\r\n                        primaryText={comment.user.name}\r\n                        secondaryText={comment.text} />\r\n                )}\r\n            </List>\r\n        )\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.ui.react/components/comments.js","import React from 'react';\r\nimport TextField from 'material-ui/TextField';\r\nimport RaisedButton from 'material-ui/RaisedButton';\r\nimport Chip from 'material-ui/Chip';\r\n\r\n\r\n\r\nexport default class EditArticle extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\terrors: {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\ttext: '',\r\n                description: '',\r\n\t\t\t\ttags: ''\r\n\t\t\t},\r\n\t\t\tarticle: props.article\r\n\t\t};\r\n\r\n        this.styles = {\r\n            chip: {\r\n                margin: 4,\r\n            },\r\n            wrapper: {\r\n                display: 'flex',\r\n                flexWrap: 'wrap',\r\n            },\r\n        };\r\n\t\t\r\n\t\tthis.edit = this.edit.bind(this);\r\n\t\tthis.onChangeTitle = this.onChangeTitle.bind(this);\r\n\t\tthis.onChangeText = this.onChangeText.bind(this);\r\n\t\tthis.onChangeDescription = this.onChangeDescription.bind(this);\r\n\t}\r\n\r\n\tonChangeTitle(event){\r\n        this.state.article.title = event.target.value;\r\n\t\tthis.setState(this.state.article);\r\n\t}\r\n\r\n\tonChangeText(event){\r\n        this.state.article.text = event.target.value;\r\n\t\tthis.setState(this.state.article);\r\n\t}\r\n    \r\n\tonChangeDescription(event){\r\n        this.state.article.description = event.target.value;\r\n\t\tthis.setState(this.state.article);\r\n\t}\r\n\r\n\tedit(event){\r\n            // prevent default action. in this case, action is the form submission event\r\n        event.preventDefault();\r\n        let article = {\r\n            id: this.state.article.id,\r\n            title: this.state.article.title,\r\n            text: this.state.article.text,\r\n            description: this.state.article.description,\r\n            tags: this.props.article.tags\r\n        };\r\n        \r\n        let xhr = new XMLHttpRequest();\r\n        xhr.open('PUT', '/api/articles/');\r\n        xhr.setRequestHeader('Content-type', 'application/json');\r\n        xhr.setRequestHeader('Authorization', this.props.token);\r\n        xhr.responseType = 'json';\r\n\r\n        xhr.addEventListener('load', () => {\r\n            if(xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {\r\n                console.log(xhr.response);\r\n                    if(xhr.response.success){\r\n                                                    \r\n                    window.location.href = '/react/articles/' + this.state.article.id;\r\n                    } else{\r\n                        alert(xhr.response.message);\r\n                    }\r\n            }\r\n        });\r\n\r\n\t\txhr.send(JSON.stringify(article));\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<form action=\"\" onSubmit={this.edit}>\r\n                    <div className=\"toolBar\">\r\n                         <RaisedButton label=\"Back\" href={'/react/articles/' + this.state.article.id} />\r\n                         <RaisedButton label=\"Apply changes\" type=\"submit\"/>\r\n                    </div>\r\n\r\n\t\t\t\t\t<div>\t\t\t\r\n\t\t\t\t\t    <TextField\r\n                            id=\"editArticle-title\"\r\n                            fullWidth={true}\r\n                            floatingLabelText=\"Title\"\r\n                            onChange={this.onChangeTitle}\r\n                            errorText={this.state.errors.title}\r\n                            value={this.state.article.title}\r\n                            />\r\n\t\t\t\t    </div>\r\n\r\n                    <div>\t\t\t\r\n                       <TextField\r\n                            id=\"editArticle-description\"\r\n                            fullWidth={true}\r\n                            floatingLabelText=\"Description\"\r\n                            onChange={this.onChangeDescription}\r\n                            errorText={this.state.errors.description}\r\n                            value={this.state.article.description}\r\n                            />\r\n                    </div>\r\n\t\t\t\t\t\r\n                    <div>\r\n                       <TextField\r\n                            id=\"editArticle-text\"\r\n                            fullWidth={true}\r\n                            floatingLabelText=\"Text\"\r\n                            onChange={this.onChangeText}\r\n                            errorText={this.state.errors.text}\r\n                            value={this.state.article.text}\r\n                            />\r\n                    </div>\r\n\r\n\t\t\t  </form>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.ui.react/components/editArticle.js","import React from 'react';\r\nimport TextField from 'material-ui/TextField';\r\nimport RaisedButton from 'material-ui/RaisedButton';\r\n\r\nimport cookie from 'react-cookie';\r\n\r\n\r\n\r\nexport default class Auth extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\terrors: {\r\n\t\t\t\temail: '',\r\n\t\t\t\tpassword: ''\r\n\t\t\t},\r\n\t\t\tuser: {\r\n\t\t\t\temail: '',\r\n\t\t\t\tpassword: ''\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tthis.login = this.login.bind(this);\r\n\t\tthis.onChangeMail = this.onChangeMail.bind(this);\r\n\t\tthis.onChangePassword = this.onChangePassword.bind(this);\r\n\t}\r\n\r\n\tonChangeMail(event){\r\n    this.state.user.email = event.target.value;\r\n\t\tthis.setState(this.state.user);\r\n\t}\r\n\r\n\tonChangePassword(event){\t\t\r\n    this.state.user.password = event.target.value;\r\n\t\tthis.setState(this.state.user);\r\n\t}\r\n\r\n\tlogin(event){\r\n\t\t// prevent default action. in this case, action is the form submission event\r\n    event.preventDefault();\r\n\r\n\t\tlet xhr = new XMLHttpRequest();\r\n\t\txhr.open('POST', '/login/');\r\n\t\txhr.setRequestHeader('Content-type', 'application/json');\r\n\t\txhr.responseType = 'json';\r\n\r\n    xhr.addEventListener('load', () => {\r\n        if(xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {\r\n            console.log(xhr.response);\r\n\t\t\t\t\t\tif(xhr.response.success){\r\n\t\t\t\t\t\t\tcookie.save(\"Id\", xhr.response.data.id);\r\n\t\t\t\t\t\t\tcookie.save(\"Token.JWT\", xhr.response.data.token);\r\n\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t      window.location.href = window.location.href + \"articles\";\r\n\t\t\t\t\t\t} else{\r\n\t\t\t\t\t\t\talert(xhr.response.message);\r\n\t\t\t\t\t\t}\r\n        }\r\n\t\t});\r\n\r\n\t\txhr.send(JSON.stringify(this.state.user));\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t{ !this.props.isAuth && (\r\n\t\t\t\t<form action=\"\" onSubmit={this.login}>\r\n\t\t\t\t  <div>\t\t\t\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t  id=\"loginForm-login\"\r\n\t\t\t\t\t\t\tfloatingLabelText=\"Email\"\r\n\t\t\t\t\t\t\tonChange={this.onChangeMail}\r\n\t\t\t\t\t\t\terrorText={this.state.errors.email}\r\n\t\t\t\t\t\t\tvalue={this.state.user.email}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t  </div>\r\n                  \r\n\t\t\t\t  <div>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t  id=\"loginForm-password\"\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tfloatingLabelText=\"Password\"\r\n\t\t\t\t\t\t\tonChange={this.onChangePassword}\r\n\t\t\t\t\t\t\terrorText={this.state.errors.password}\r\n\t\t\t\t\t\t\tvalue={this.state.user.password}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t  </div>\r\n\r\n          <div>\r\n\t\t\t\t\t\t<RaisedButton label=\"Sign In\" type=\"submit\"/>\r\n\t\t\t\t  </div>\r\n\r\n\t\t\t</form>\r\n\t\t\t)}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.ui.react/components/login.js","import React from 'react';\r\nimport TextField from 'material-ui/TextField';\r\nimport RaisedButton from 'material-ui/RaisedButton';\r\nimport Chip from 'material-ui/Chip';\r\n\r\n\r\n\r\nexport default class NewArticle extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\terrors: {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\ttext: '',\r\n                description: '',\r\n\t\t\t\ttags: ''\r\n\t\t\t},\r\n\t\t\tarticle: {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\ttext: '',\r\n                description: '',\r\n\t\t\t\ttags: [\r\n                    {\r\n                        key: 0,\r\n                        value: 'tag1'\r\n                    },\r\n                    {\r\n                        key: 1,\r\n                        value: 'tag2'\r\n                    },\r\n                    {\r\n                        key: 2,\r\n                        value: 'tag3'\r\n                    }\r\n                ]\r\n\t\t\t}\r\n\t\t};\r\n\r\n        this.styles = {\r\n            chip: {\r\n                margin: 4,\r\n            },\r\n            wrapper: {\r\n                display: 'flex',\r\n                flexWrap: 'wrap',\r\n            },\r\n        };\r\n\t\t\r\n\t\tthis.add = this.add.bind(this);\r\n\t\tthis.onChangeTitle = this.onChangeTitle.bind(this);\r\n\t\tthis.onChangeText = this.onChangeText.bind(this);\r\n\t\tthis.onChangeDescription = this.onChangeDescription.bind(this);\r\n\t}\r\n\r\n\tonChangeTitle(event){\r\n        this.state.article.title = event.target.value;\r\n\t\tthis.setState(this.state.article);\r\n\t}\r\n\r\n\tonChangeText(event){\r\n        this.state.article.text = event.target.value;\r\n\t\tthis.setState(this.state.article);\r\n\t}\r\n    \r\n\tonChangeDescription(event){\r\n        this.state.article.description = event.target.value;\r\n\t\tthis.setState(this.state.article);\r\n\t}\r\n\r\n\tadd(event){\r\n            // prevent default action. in this case, action is the form submission event\r\n        event.preventDefault();\r\n        let article = {\r\n            title: this.state.article.title,\r\n            text: this.state.article.text,\r\n            description: this.state.article.description,\r\n            tags: []\r\n        };\r\n        \r\n        Array.forEach(this.state.article.tags, tag => {article.tags.push(tag.value)});\r\n\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.open('POST', '/api/articles');\r\n        xhr.setRequestHeader('Content-type', 'application/json');\r\n        xhr.setRequestHeader('Authorization', this.props.token);\r\n        xhr.responseType = 'json';\r\n\r\n        xhr.addEventListener('load', () => {\r\n            if(xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {\r\n                console.log(xhr.response);\r\n                            if(xhr.response.success){\r\n                                                            \r\n                            window.location.href = '/react/articles';\r\n                            } else{\r\n                                alert(xhr.response.message);\r\n                            }\r\n            }\r\n        });\r\n\r\n\t\txhr.send(JSON.stringify(article));\r\n\t}\r\n\r\n    handleRequestDelete = (key) => {\r\n        if (key === 3) {\r\n            alert('Why would you want to delete React?! :)');\r\n            return;\r\n        }\r\n\r\n        this.chipData = this.state.article.tags;\r\n        const chipToDelete = this.chipData.map((chip) => chip.key).indexOf(key);\r\n        this.chipData.splice(chipToDelete, 1);\r\n        this.setState(this.state.article);\r\n    };\r\n\r\n    renderChip(data) {\r\n        return (\r\n            <Chip\r\n                key={data.key}\r\n                onRequestDelete={() => this.handleRequestDelete(data.key)}\r\n                style={this.styles.chip}>\r\n                {data.value}\r\n            </Chip>\r\n        );\r\n    }\r\n\r\n\trender() {\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<form action=\"\" onSubmit={this.add}>\r\n                \r\n                    <div className=\"toolBar\">\r\n                         <RaisedButton label=\"Back\" href='/react/articles' />\r\n                         <RaisedButton label=\"Create\" type=\"submit\"/>\r\n                    </div>\r\n\r\n\t\t\t\t\t<div>\t\t\t\r\n\t\t\t\t\t    <TextField\r\n                            id=\"newArticle-title\"\r\n                                floatingLabelText=\"Title\"\r\n                                onChange={this.onChangeTitle}\r\n                                errorText={this.state.errors.title}\r\n                                value={this.state.article.title}\r\n                                />\r\n\t\t\t\t    </div>\r\n\r\n                    <div style={this.styles.wrapper}>\r\n                        {this.state.article.tags.map(this.renderChip, this)}\r\n                    </div>\r\n\r\n                    <div>\t\t\t\r\n                       <TextField\r\n                            id=\"newArticle-description\"\r\n                                floatingLabelText=\"Description\"\r\n                                onChange={this.onChangeDescription}\r\n                                errorText={this.state.errors.description}\r\n                                value={this.state.article.description}\r\n                                />\r\n                    </div>\r\n\t\t\t\t\t\r\n                    <div>\r\n                       <TextField\r\n                            id=\"newArticle-text\"\r\n                                floatingLabelText=\"Text\"\r\n                                onChange={this.onChangeText}\r\n                                errorText={this.state.errors.text}\r\n                                value={this.state.article.text}\r\n                                />\r\n                    </div>\r\n\r\n\t\t\t  </form>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.ui.react/components/newArticle.js","import React from 'react';\r\nimport TextField from 'material-ui/TextField';\r\nimport RaisedButton from 'material-ui/RaisedButton';\r\n\r\n\r\n\r\nexport default class NewComment extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\terrors: {\r\n\t\t\t\ttext: ''\r\n\t\t\t},\r\n\t\t\tcomment: {\r\n\t\t\t\ttext: ''\r\n\t\t\t}\r\n\t\t};\r\n\r\n        this.styles = {\r\n            chip: {\r\n                margin: 4,\r\n            },\r\n            wrapper: {\r\n                display: 'flex',\r\n                flexWrap: 'wrap',\r\n            },\r\n        };\r\n\t\t\r\n\t\tthis.add = this.add.bind(this);\r\n\t\tthis.onChangeText = this.onChangeText.bind(this);\r\n\t}\r\n\r\n\tonChangeText(event){\r\n        this.state.comment.text = event.target.value;\r\n\t\tthis.setState(this.state.comment);\r\n\t}\r\n\r\n\tadd(event){\r\n\r\n        // prevent default action. in this case, action is the form submission event\r\n        event.preventDefault();\r\n\r\n        let comment = {\r\n            text: this.state.comment.text\r\n        };\r\n        \r\n        let xhr = new XMLHttpRequest();\r\n        xhr.open('POST', '/api/articles/' + this.props.article_id + '/comments/add');\r\n        xhr.setRequestHeader('Content-type', 'application/json');\r\n        xhr.setRequestHeader('Authorization', this.props.token);\r\n        xhr.responseType = 'json';\r\n\r\n        xhr.addEventListener('load', () => {\r\n            if(xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {\r\n                console.log(xhr.response);\r\n                            if(xhr.response.success){\r\n                                                            \r\n                            window.location.href = window.location.href;\r\n                            } else{\r\n                                alert(xhr.response.message);\r\n                            }\r\n            }\r\n        });\r\n\r\n\t\txhr.send(JSON.stringify(comment));\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<form action=\"\" onSubmit={this.add}>\r\n          \r\n\t\t\t\t\t<div>\t\t\t\r\n\t\t\t\t\t    <TextField\r\n                            id=\"newComemnt-text\"\r\n                            floatingLabelText=\"Your Comment\"\r\n                            onChange={this.onChangeText}\r\n                            errorText={this.state.errors.text}\r\n                            value={this.state.comment.text}\r\n                            multiLine={true}\r\n                            fullWidth={true}\r\n                            rows={4}\r\n                            rowsMax={8}\r\n                            />\r\n\t\t\t\t    </div>\r\n\r\n                    <div>\r\n                        <RaisedButton label=\"Add Comment\" type=\"submit\"/>\r\n                    </div>\r\n\r\n\t\t\t  </form>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.ui.react/components/newComment.js","import React from 'react';\r\nimport TextField from 'material-ui/TextField';\r\nimport RaisedButton from 'material-ui/RaisedButton';\r\n\r\nimport cookie from 'react-cookie';\r\n\r\n\r\n\r\nexport default class SignUp extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\terrors: {\r\n\t\t\t\tname: '',\r\n\t\t\t\temail: '',\r\n\t\t\t\tpassword: ''\r\n\t\t\t},\r\n\t\t\tuser: {\r\n\t\t\t\tname: '',\r\n\t\t\t\temail: '',\r\n\t\t\t\tpassword: ''\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tthis.signup = this.signup.bind(this);\r\n\t\tthis.onChangeName = this.onChangeName.bind(this);\r\n\t\tthis.onChangeMail = this.onChangeMail.bind(this);\r\n\t\tthis.onChangePassword = this.onChangePassword.bind(this);\r\n\t}\r\n\r\n\tonChangeName(event){\r\n    this.state.user.name = event.target.value;\r\n\t\tthis.setState(this.state.user);\r\n\t}\r\n\r\n\tonChangeMail(event){\r\n    this.state.user.email = event.target.value;\r\n\t\tthis.setState(this.state.user);\r\n\t}\r\n\r\n\tonChangePassword(event){\r\n    this.state.user.password = event.target.value;\r\n\t\tthis.setState(this.state.user);\r\n\t}\r\n\r\n\tsignup(event){\r\n\t\t// prevent default action. in this case, action is the form submission event\r\n    event.preventDefault();\r\n\r\n\t\tlet xhr = new XMLHttpRequest();\r\n\t\txhr.open('POST', '/signup');\r\n\t\txhr.setRequestHeader('Content-type', 'application/json');\r\n\t\txhr.responseType = 'json';\r\n\r\n    xhr.addEventListener('load', () => {\r\n        if(xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {\r\n            console.log(xhr.response);\r\n\t\t\t\t\t\tif(xhr.response.success){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t      window.location.href = '/react';\r\n\t\t\t\t\t\t} else{\r\n\t\t\t\t\t\t\talert(xhr.response.message);\r\n\t\t\t\t\t\t}\r\n        }\r\n\t\t});\r\n\r\n\t\txhr.send(JSON.stringify(this.state.user));\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<form action=\"\" onSubmit={this.signup}>\r\n\r\n\t\t\t\t\t<div className=\"toolBar\">\r\n\t\t\t\t\t\t\t\t<RaisedButton label=\"Back\" href='/react' />\r\n\t\t\t\t\t\t\t\t<RaisedButton label=\"Sign Up\" type=\"submit\"/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div>\t\t\t\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t  id=\"signupForm-name\"\r\n\t\t\t\t\t\t\tfloatingLabelText=\"Name\"\r\n\t\t\t\t\t\t\tonChange={this.onChangeName}\r\n\t\t\t\t\t\t\terrorText={this.state.errors.name}\r\n\t\t\t\t\t\t\tvalue={this.state.user.name}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t  </div>\r\n\r\n\t\t\t\t  <div>\t\t\t\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t  id=\"signupForm-login\"\r\n\t\t\t\t\t\t\tfloatingLabelText=\"Email\"\r\n\t\t\t\t\t\t\tonChange={this.onChangeMail}\r\n\t\t\t\t\t\t\terrorText={this.state.errors.email}\r\n\t\t\t\t\t\t\tvalue={this.state.user.email}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t  </div>\r\n\t\t\t\t\t\r\n\t\t\t\t  <div>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t  id=\"signupForm-password\"\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tfloatingLabelText=\"Password\"\r\n\t\t\t\t\t\t\tonChange={this.onChangePassword}\r\n\t\t\t\t\t\t\terrorText={this.state.errors.password}\r\n\t\t\t\t\t\t\tvalue={this.state.user.password}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t  </div>\r\n\r\n\t\t\t  </form>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.ui.react/components/signup.js","import React from 'react';\r\n\r\nimport RaisedButton from 'material-ui/RaisedButton';\r\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\r\nimport { muiTheme as customTheme } from './theme';\r\n\r\nimport ArticleDetail from '../components/articleDetail.js';\r\nimport Comments from '../components/comments.js';\r\nimport NewComment from '../components/newComment.js';\r\n\r\n\r\nexport default class ArticleDetailsPage extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t};\r\n\r\n\trender() {\r\n\t\t\r\n\t\tlet myArticle = JSON.stringify(this.props.user_id) == JSON.stringify(this.props.article.user.user_id);\r\n\t\t\r\n\t\treturn (\r\n\r\n\t\t\t<MuiThemeProvider muiTheme={customTheme}>\r\n\t\t\t\t<div>\r\n                    <div className=\"toolBar\">\r\n\t\t\t\t\t\t<RaisedButton label=\"Home\" href=\"/react\" />\r\n\t\t\t\t\t\t<RaisedButton label=\"Articles\" href=\"/react/articles\" />\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t{myArticle\r\n\t\t\t\t\t\t&& <RaisedButton label=\"Edit article\" href={\"/react/articles/\" + this.props.article.id + \"/edit\"}/>}\r\n\t\t\t\t    </div>\r\n\r\n\t\t\t\t\t<ArticleDetail article={this.props.article} />\r\n\t\t\t\t\t<Comments comments={this.props.comments} />\r\n\t\t\t\t\t<div className=\"newcomment-container\">\r\n\t\t\t\t\t\t<NewComment article_id={this.props.article.id} token={this.props.token}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</MuiThemeProvider>\r\n\r\n\t\t)\r\n\t};\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.ui.react/views/articleDetailsPage.js","import React from 'react';\r\n\r\nimport RaisedButton from 'material-ui/RaisedButton';\r\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\r\nimport {muiTheme as customTheme} from './theme';\r\n\r\nimport ArticlesList from '../components/articlesList.js';\r\nimport { logOut } from '../services/auth.service.js';\r\n\r\n\r\nexport default class ArticlesPage extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t};\r\n    \r\n\trender() {\r\n\t\treturn (\r\n            <div>\r\n                <MuiThemeProvider muiTheme={customTheme}>\r\n\t\t\t\t    <div>\r\n\t\t\t\t\t\t<div className=\"toolBar\">\r\n\t\t\t\t\t\t\t<RaisedButton label=\"Home\" href=\"/react\" />\r\n\t\t\t\t\t\t\t{this.props.dataContext.isAuth &&\r\n\t\t\t\t\t\t\t\t<RaisedButton label=\"Log Out\"onClick={logOut}/>}\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t{this.props.dataContext.isAuth &&\r\n\t\t\t\t\t\t\t\t<RaisedButton label=\"Add article\" href=\"/react/newarticle/\"/>}\r\n\t\t\t\t\t\t</div>\r\n                        <ArticlesList articles={this.props.dataContext.articles}/>\r\n\t\t\t\t\t</div>\r\n                </MuiThemeProvider>\r\n\r\n                <div>Total items count {this.props.dataContext.count}</div>\r\n            </div>\r\n\t\t)\r\n\t};\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.ui.react/views/articlesPage.js","import React from 'react';\r\n\r\nimport RaisedButton from 'material-ui/RaisedButton';\r\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\r\nimport {muiTheme as customTheme} from './theme';\r\n\r\nimport EditArticle from '../components/editArticle';\r\n\r\n\r\nexport default class EditArticlePage extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t};\r\n    \r\n\trender() {\r\n\t\treturn (\r\n\r\n            <div>\r\n                <MuiThemeProvider muiTheme={customTheme}>\r\n\t\t\t\t    <div>\r\n\t\t\t\t\t\t<EditArticle token={this.props.dataContext.token} article={this.props.dataContext.article}/>\r\n\t\t\t\t\t</div>\r\n                </MuiThemeProvider>\r\n            </div>\r\n\r\n\t\t)\r\n\t};\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.ui.react/views/editArticlePage.js","import React from 'react';\r\n\r\nimport Login from '../components/login.js';\r\nimport { logOut } from '../services/auth.service.js';\r\n\r\nimport RaisedButton from 'material-ui/RaisedButton';\r\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\r\n// import getMuiTheme from 'material-ui/styles/getMuiTheme';\r\n// import { deepOrange500 } from 'material-ui/styles/colors';\r\nimport {muiTheme as customTheme} from './theme';\r\n\r\nexport default class Main extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n        // This binding is necessary to make `this` work in the callback\r\n        this.signup = this.signup.bind(this);\r\n\t};\r\n    \r\n    signup = () => {\r\n\r\n        console.log(\"signup\");\r\n        alert('left');\r\n    };\r\n\r\n\trender() {\r\n\t\treturn (\r\n            <MuiThemeProvider muiTheme={customTheme}>\r\n                <div>\r\n                    \r\n                        <div className=\"toolBar\">\r\n                            <RaisedButton label=\"Articles\" href=\"/react/articles\" />\r\n                            {this.props.isAuth &&\r\n                                <RaisedButton label=\"Log Out\"onClick={logOut}/>}                                \r\n                            {!this.props.isAuth &&\r\n                                <RaisedButton label=\"Sign Up\" href=\"/react/signup\"/>}\r\n                        </div>\r\n                    \r\n                        <div>\r\n                            <Login isAuth={this.props.isAuth}/>\r\n                        </div>\r\n                </div>\r\n            </MuiThemeProvider>\r\n\t\t)\r\n\t};\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.ui.react/views/main.js","import React from 'react';\r\n\r\nimport RaisedButton from 'material-ui/RaisedButton';\r\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\r\nimport {muiTheme as customTheme} from './theme';\r\n\r\nimport NewArticle from '../components/newArticle';\r\n\r\n\r\nexport default class NewArticlePage extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t};\r\n    \r\n\trender() {        \r\n\t\treturn (\r\n            <div>\r\n                <MuiThemeProvider muiTheme={customTheme}>\r\n\t\t\t\t    <div>\r\n\t\t\t\t\t\t<NewArticle isAuth={this.props.dataContext.isAuth} token={this.props.dataContext.token} />\r\n\t\t\t\t\t</div>\r\n                </MuiThemeProvider>            \r\n            </div>\r\n\t\t)\r\n\t};\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.ui.react/views/newArticlePage.js","import React from 'react';\r\n\r\nimport SignUp from '../components/signup.js';\r\n\r\nimport RaisedButton from 'material-ui/RaisedButton';\r\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\r\n// import getMuiTheme from 'material-ui/styles/getMuiTheme';\r\n// import { deepOrange500 } from 'material-ui/styles/colors';\r\nimport {muiTheme as customTheme} from './theme';\r\n\r\nexport default class SignUpPage extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n        // This binding is necessary to make `this` work in the callback\r\n        this.signup = this.signup.bind(this);\r\n\t};\r\n    \r\n    signup = () => {\r\n\r\n        console.log(\"signup\");\r\n        alert('left');\r\n    };\r\n\r\n\trender() {\r\n\t\treturn (\r\n            <div>\r\n                <MuiThemeProvider muiTheme={customTheme}>\r\n                    <div>\r\n                        <SignUp />\r\n                    </div>\r\n                </MuiThemeProvider>\r\n            </div>\r\n\t\t)\r\n\t};\r\n}\n\n\n// WEBPACK FOOTER //\n// ./bloglog.ui.react/views/signupPage.js","export default ({ body, title, scriptDest, data }) => {\r\n  return `\r\n    <!DOCTYPE html>\r\n    <html>\r\n      <head>\r\n        <title>${title}</title>\r\n        <link rel=\"stylesheet\" href=\"/css/react-css.css\" />\r\n      </head>\r\n      \r\n      <body>\r\n        <div id=\"root\">${body}</div>` +\r\n        (data !== undefined ?\r\n           `<script type=\"text/javascript\" charset=\"utf-8\">\r\n               window.data = ${JSON.stringify(data)};\r\n            </script>`\r\n            : ''\r\n        ) +        \r\n        `<script src=\"/${scriptDest}\"></script>\r\n      </body>\r\n      \r\n    </html>\r\n  `;\r\n};\n\n\n// WEBPACK FOOTER //\n// ./bloglog.ui.react/views/template.js","module.exports = __webpack_public_path__ + \"./views/index.html\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./bloglog.ui/views/index.html\n// module id = 87\n// module chunks = 0","module.exports = require(\"jwt-simple\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jwt-simple\"\n// module id = 88\n// module chunks = 0","module.exports = require(\"material-ui/styles/colors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"material-ui/styles/colors\"\n// module id = 89\n// module chunks = 0","module.exports = require(\"material-ui/styles/getMuiTheme\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"material-ui/styles/getMuiTheme\"\n// module id = 90\n// module chunks = 0","module.exports = require(\"passport-jwt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport-jwt\"\n// module id = 91\n// module chunks = 0","module.exports = require(\"react-dom\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-dom\"\n// module id = 92\n// module chunks = 0","module.exports = require(\"react-dom/server\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-dom/server\"\n// module id = 93\n// module chunks = 0","module.exports = require(\"react-tap-event-plugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-tap-event-plugin\"\n// module id = 94\n// module chunks = 0","'use strict';\r\n\r\n// internal\r\nimport path from 'path';\r\n\r\n// external\r\nimport express from 'express';\r\nimport http from 'http';\r\nimport bodyParser from 'body-parser';\r\nimport cookieParser from 'cookie-parser';\r\n\r\n// locals\r\nimport config from '../config.json';\r\nimport apiRoutes from './bloglog.api';\r\nimport uiRoutes from './bloglog.ui';\r\nimport uiReactRoutes from './bloglog.ui.react';\r\nimport auth from './bloglog.auth';\r\n\r\n\r\n\r\n// create app\r\nconst app = express();\r\napp.server = http.createServer(app);\r\n\r\napp.use(cookieParser());\r\n\r\n// parsing application/json body\r\napp.use(bodyParser.json());\r\n\r\n// make static files server\r\napp.use(express.static('./dist'));\r\napp.use(express.static('./node_modules'));\r\n\r\n// configure views\r\napp.set('view engine', 'html');\r\napp.engine('html', require('ejs').renderFile);\r\napp.set('views', path.join(__dirname, './'));\r\n\r\n// init auth\r\nauth.initialize(app);\r\n\r\n// set routes\r\napp.use('/api', apiRoutes);\r\napp.use('/react', uiReactRoutes);\r\napp.use('/', uiRoutes);\r\n\r\nconsole.log(\"NODE_ENV \" + process.env.NODE_ENV);\r\n\r\n// start server.\r\napp.server.listen(process.env.PORT || config.port);\n\n\n// WEBPACK FOOTER //\n// ./index.js"],"sourceRoot":""}